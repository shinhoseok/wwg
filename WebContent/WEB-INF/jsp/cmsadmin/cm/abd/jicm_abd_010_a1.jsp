<%--/*=================================================================================*//* 시스템            : JRCMS 시스템 SYSTEM/* 프로그램 아이디   : /* 프로그램 이름     : jicm_abd_010_a1    /* 소스파일 이름     : jicm_abd_010_a1.jsp/* 설명              : SYSTEM 게시판관리 등록,수정페이지/* 버전              : 1.0.0/* 최초 작성자       : 이금용/* 최초 작성일자     : 2016-11-16/* 최근 수정자       : 이금용/* 최근 수정일시     : 2016-11-16/* 최종 수정내용     : 최초작성/*=================================================================================*/--%><%@page pageEncoding="utf-8"%><div class="supply_box">	<!--//board_A0_write-->	<form action="<c:out value='${basePath}'/>/cmsmain.do" name="insertForm" id="insertForm" enctype="multipart/form-data" method="post">		<input type="hidden" 	id="scode"  					name="scode" 				value="<c:out value='${scode}'/>" title="사이트코드" />		<input type="hidden" 	id="pcode"  					name="pcode" 				value="<c:out value='${pcode}'/>" title="페이지코드" />		<input type="hidden" 	id="pstate"  					name="pstate" 				value="<c:out value='${pstate}'/>" title="페이지상태" />		<input type="hidden" 	id="pageIndex" 					name="pageIndex" 			value="<c:out value='${R_MAP.param.pageIndex}'/>"/>		<input type="hidden" 	id="searchGubun" 				name="searchGubun" 			value="<c:out value='${R_MAP.param.searchGubun}'/>" />		<input type="hidden" 	id="searchValue" 				name="searchValue" 			value="<c:out value='${R_MAP.param.searchValue}'/>" />		<div class="board_A0_W">			<table summary="상세보기">				<colgroup>					<col width="15%">					<col width="35%">					<col width="15%">					<col width="35%">				</colgroup>				<tbody>					<tr>						<th class="essential" scope="row"><label for="B_TITLE">제목</label></th>						<td colspan="3">							<input name="dataTitle" title="제목" class="in" id="dataTitle" style="width: 95%; vertical-align: middle;" type="text" maxlength="100" value="">						</td>					</tr>					<tr>						<th scope="row"><label for="REG_NAME">작성자</label></th>						<td><c:out value="${sessionScope.SITE_ADM_SESS.USER_NM}"/></td>						<th scope="row">작성일</th>						<td>							<input name="regDt" title="시작일 입력" id="regDt" type="text" size="12" value="<c:out value="${R_MAP.today}"/>" readonly="readonly">							<span class="btnIc_calendar"><a onclick="Calendar_D(document.getElementById('regDt'));return false;" href="#"></a></span>						</td>					</tr>					<tr>						<td class="vaT" colspan="4" scope="row">							<textarea name="dataDesc" id="dataDesc" style="width: 100%; min-height: 450px;"></textarea>						</td>					</tr>					<tr>						<th><label class="td" for="">첨부파일</label></th>						<td colspan="3" style="height: 150px;">							<div id="cmfile1">								<div id="div_in_file">								<label class="inputFile_label" for="inputFile_label" onclick="fn_input_file();">첨부파일</label>									<input name="" id="input_file" title="첨부파일 찾기" class="inputFile" style="width: 90%;display:none;" type="file" multiple="multiple">								</div>								<p class="file_comment"><span class="pointR" style="margin-top: 0px; display: inline; color: red; font-size: 15px;">									파일은 <span class="pointR" style="margin-top: 0px; display: inline;">최대 5개</span> 까지, 용량은									<span class="pointR" style="margin-top: 0px; display: inline;">300MB까지</span>									가능(첨부가능파일:GIF,JPG,JPEG,BMP,PNG,HWP,XLS,XLSX,ZIP,PDF,TIF,DOC,DOCX,PPT,PPTS,PPTX,TXT)								</p>								<div id="dropZone">									<div id="fileDragDesc"></div>									<table id="fileListTable" style="width: 100%; border: 0px;">										<tbody id="fileTableTbody"></tbody>									</table>								</div>							</div>						</td>					</tr>				</tbody>			</table>		</div>	</form>	<!--//board_A0_write-->	<div class="section lineTbtn aR mT10 mB5">		<span class="btn_pack large"><a onclick="fn_insertBoardProc();" href="javascript:void(0);">등록</a></span>		<span class="btn_pack largeG"> <a onclick="fn_selectBoardList();" href="javascript:void(0);">목록</a></span>	</div></div><script src="<c:out value='${scriptPath}'/>/validation/common.js"></script><script src="<c:out value='${scriptPath}'/>/validation/validation.js"></script><script>$(document).ready(function () {	fileDropDown("dropZone"); //파일 드롭다운});var oEditors = [];nhn.husky.EZCreator.createInIFrame({    oAppRef: oEditors,    elPlaceHolder: "dataDesc",    sSkinURI: "<c:out value='${basePath}'/>/se290/EditorSkin.ko.jsp",    fCreator: "createSEditor2",    htParams: {fOnBeforeUnload:function(){}}	});//목록이동var fn_selectBoardList = function() {	var frm = document.insertForm;	frm.pstate.value="L";	frm.submit();};//개별업로드var fn_input_file = function () {	$("#input_file").click();}$("#input_file").bind('change', function() {	selectFile(this.files);});var fn_insertBoardProc = function() {	if (!TypeChecker.required($("#dataTitle").val())) {		alert("'제목'은  "+ TypeChecker.requiredText);		$("#dataTitle").focus();		return;	}	if (!TypeChecker.date($("#regDt").val())) {		alert("'등록일'은  "+ TypeChecker.dateText);		$("#regDt").focus();		return;	}	oEditors.getById["dataDesc"].exec("UPDATE_CONTENTS_FIELD", []);	var dataDesc = $("#dataDesc").val();		var uploadFileList = Object.keys(fileList);	if(totalFileSize > maxUploadSize) {		alert("총  용량 초과\n총 업로드 가능 용량 : "+maxUploadSize+" MB");		return;	}	//파일과 인서트할 데이터셋팅	if(fn_getBrowser() == "IE") {		var form = $("#insertForm");		var formData = new FormData(form);				for(var i=0; i<uploadFileList.length; i++) {			formData.append('files', fileList[uploadFileList[i]]);		}		formData.append('dataTitle', $("#dataTitle").val());		formData.append('dataDesc', dataDesc);		formData.append('regDt', $("#regDt").val());		formData.append('menuCd', $("#pcode").val());		formData.append('openYn', "Y");		formData.append('topDataYn', "N");		formData.append('authType', "ALOGIN");	} else {		var formData = new FormData(document.getElementById("insertForm"));		for(var i=0; i<uploadFileList.length; i++) {			if(i == 0) {				formData.set('files', fileList[uploadFileList[i]]);			} else {				formData.append('files', fileList[uploadFileList[i]]);			}		}		formData.set('dataTitle', $("#dataTitle").val());		formData.set('dataDesc', dataDesc);		formData.set('regDt', $("#regDt").val());		formData.set('menuCd', $("#pcode").val());		formData.set('openYn', "Y");		formData.set('topDataYn', "N");		formData.set('authType', "ALOGIN");	}	$("#pstate").val("");	var url = "<c:out value='${basePath}'/>/admin/board/insertBoardProc.do";	fn_uploadFile(formData, url);};</script>