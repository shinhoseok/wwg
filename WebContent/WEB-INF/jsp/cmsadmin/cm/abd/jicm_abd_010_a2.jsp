<%--/*=================================================================================*//* 시스템            : JRCMS 시스템 SYSTEM/* 프로그램 아이디   : /* 프로그램 이름     : jicm_abd_010_a2  /* 소스파일 이름     : jicm_abd_010_a2.jsp/* 설명              : SYSTEM 게시판관리 답변등록페이지/* 버전              : 1.0.0/* 최초 작성자       : 이금용/* 최초 작성일자     : 2014-02-25/* 최근 수정자       : 이금용/* 최근 수정일시     : 2014-02-25/* 최종 수정내용     : 최초작성/*=================================================================================*/--%><%@page pageEncoding="utf-8"%><%List code_select_List = null; // 셀렉트박스 생성용 코드리스트List subauth_List = null; // 부분관리자 권한리스트List chk_up_code_List = new ArrayList();List getABDFiles = null; // 첨부파일정보Map rtn_row_map2 = new HashMap();String javasc_arr_nm = "";String select_nm = "";String inhtml_id = "";String init_code_param = "";String onchg_func_nm = "";int cprev_lv = 0;int ctmp_lv = 0;int cinit_lv = 0;int ic = 0;int j = 0;int rIDX		= 0;String rM_CODE	= "";String rM_NM 	= "";String rREG_DT	= "";String rMOD_DT	= "";  String rREG_ID	= "";String rMOD_ID	= "";String rB_TITLE	= "";	String rB_CONTENTS	= "";int rREAD_CNT	= 0;int rR_IDX	= 0;int rR_DEPTH	= 0;String rPASSWD	= "";String rGESI_FL	= "";String rGESI_FL_NM	= "";String rREG_NAME	= "";String rREG_MAIL	= "@";String rB_SDATE	= "";String rB_EDATE	= "";String rREG_TEL	= "";String rREG_HAND	= "";String rREG_IP	= "";String rREG_PHOTO_ALT	= "";String rREG_SVNUMBER	= "";String [] rB_ETC_ARR	= new String[10];String rFILE_NMS	= "";String [] rREG_MAIL_sp	= null;String [] rFILE_NMS_arr = null;String display_none = "";	//////////////////// 원글 셋팅부분 //////////////////////////////////////	rtn_row_Map = (Map)rtn_Map.get("getABD"); // 원글의 조회된 상세내용	//System.out.println("rtn_row_Map====== "+rtn_row_Map);	getABDFiles = (List)rtn_Map.get("getABDFiles"); // 원글의 조회된 파일정보	rIDX			= Integer.parseInt(HtmlTag.returnString(String.valueOf(rtn_row_Map.get("DATA_SEQNO")),"0"),10);	rM_CODE	= HtmlTag.returnString((String)rtn_row_Map.get("MENU_CD"),"");	rM_NM 	= HtmlTag.returnString((String)rtn_row_Map.get("MENU_NM"),"");	rREG_DT	= HtmlTag.returnString((String)rtn_row_Map.get("REG_DT"),"");	rMOD_DT	= HtmlTag.returnString((String)rtn_row_Map.get("MOD_DT"),"");  	rREG_ID	= HtmlTag.returnString((String)rtn_row_Map.get("REG_ID"),"");	rMOD_ID	= HtmlTag.returnString((String)rtn_row_Map.get("MOD_ID"),"");	rB_TITLE	= HtmlTag.returnString((String)rtn_row_Map.get("DATA_TITLE"),"");		rB_CONTENTS	= HtmlTag.returnString((String)rtn_row_Map.get("DATA_DESC"),"");	rREAD_CNT	= Integer.parseInt(HtmlTag.returnString(String.valueOf(rtn_row_Map.get("INQ_CNT")),"0"),10);	rR_IDX	= Integer.parseInt(HtmlTag.returnString(String.valueOf(rtn_row_Map.get("DATA_ORIGIN_NO")),"0"),10);	rR_DEPTH	= Integer.parseInt(HtmlTag.returnString(String.valueOf(rtn_row_Map.get("DATA_DEPTH")),"0"),10);	rPASSWD	= HtmlTag.returnString((String)rtn_row_Map.get("DATA_IPNS"),"");	rGESI_FL	= HtmlTag.returnString((String)rtn_row_Map.get("OPEN_YN"),"");	rGESI_FL_NM	= HtmlTag.returnString((String)rtn_row_Map.get("GESI_FL_NM"),"");	rREG_NAME	= HtmlTag.returnString((String)rtn_row_Map.get("REG_ID_NM"),"");	rREG_MAIL	= HtmlTag.returnString((String)rtn_row_Map.get("REG_MAIL"),"");	rB_SDATE	= HtmlTag.returnString((String)rtn_row_Map.get("DATA_SPA_ST_DT"),"");	rB_EDATE	= HtmlTag.returnString((String)rtn_row_Map.get("DATA_SPA_END_YMD"),"");	rREG_TEL	= HtmlTag.returnString((String)rtn_row_Map.get("REG_TEL"),"");	rREG_HAND	= HtmlTag.returnString((String)rtn_row_Map.get("REG_HAND"),"");	rREG_IP	= HtmlTag.returnString((String)rtn_row_Map.get("REG_IP"),"");	rREG_PHOTO_ALT	= HtmlTag.returnString((String)rtn_row_Map.get("REG_PHOTO_ALT"),"");	rREG_SVNUMBER	= HtmlTag.returnString((String)rtn_row_Map.get("REG_SVNUMBER"),"");	for(i=0;i<10;i++){		rB_ETC_ARR[i] = HtmlTag.returnString((String)rtn_row_Map.get("DATA_SPA_COL"+i),"");	}	if(rREG_MAIL==null){		rREG_MAIL_sp[0]="";		rREG_MAIL_sp[1]="";	}else{		rREG_MAIL_sp = HtmlText.split(rREG_MAIL,"@");	}		rFILE_NMS = HtmlTag.returnString((String)rtn_row_Map.get("FILE_NMS"),"");	rFILE_NMS_arr = HtmlText.split(rFILE_NMS,"::");////////////////////원글 셋팅부분 ////////////////////////////////////////////////////////////답변글 셋팅부분 //////////////////////////////////////String reREG_NAME = "";String reREG_DT = "";String reB_SDATE = "";String reREG_MAIL = "";String [] reREG_MAIL_sp	= null;	reREG_NAME	= HtmlTag.returnString((String)SITE_ADM_SESSION.get("USER_NM"),"");	reREG_DT	= curDate.substring(0,4)+"-"+curDate.substring(4,6)+"-"+curDate.substring(6,8);	reB_SDATE	= curDate.substring(0,4)+"-"+curDate.substring(4,6)+"-"+curDate.substring(6,8);	reREG_MAIL	= HtmlTag.returnString((String)SITE_ADM_SESSION.get("USER_EMAIL"),"@");		if(reREG_MAIL==null){		reREG_MAIL_sp[0]="";		reREG_MAIL_sp[1]="";	}else{		reREG_MAIL_sp = HtmlText.split(reREG_MAIL,"@");	}		////////////////////답변글 셋팅부분 //////////////////////////////////////// 이메일주소코드셀렉트박스를 셋팅한다code_select_List = (List)rtn_Map.get("ListTree0000000012"); // 조회된 리스트javasc_arr_nm = "treemenuval_1";select_nm = "dto_SELMENU1_";inhtml_id = "SEL_DIVS1";init_code_param = "";onchg_func_nm = "Chg_0000000012";%><%--@include file="/WEB-INF/jsp/cm/CmCodeSelect.jsp"--%><script language="javascript" src="<%=con_root%>/js/com-file.js"></script>	<script language="javascript" src="<%=con_root%>/js/calendar.js"></script><script type="text/javascript" src="<%=con_root%>/smarteditor/js/HuskyEZCreator.js"></script><script type="text/javascript">$(function(){		var file2 = $.fn.cmfile.init({			 id				: 'cmfile1' 			 ,onClickNamefn	: "fileNameClick1"			 ,img_url 		: "<%=img_url%>"			 ,uploadcnt		: <%=uploadcnt%>			 <%			 // 공지형, 자유형, 답변형, faq			 if(BOARD_TY.equals("000010") || BOARD_TY.equals("000011") || BOARD_TY.equals("000012") || BOARD_TY.equals("000052")){			 %>			 ,extchk		: ['GIF','JPG','BMP','PNG','HWP','XLS','XLSX','ZIP','PDF','TIF','DOC','DOCX','PPT','PPTX','TXT']			 <%			 // 갤러리형			 }else if(BOARD_TY.equals("000013")){			 %>			 ,extchk		: ['GIF','JPG','BMP','PNG','ZIP']			 <%			 // 동영상형			 }else if(BOARD_TY.equals("000053")){			 %>			 ,extchk		: ['MP4','WMV','OGG','OGV']			 			 <%			 }			 %>		});	});</script><!--목록시작--><form name="writefrm" method="post"  enctype="multipart/form-data" onsubmit="return false;"><input type="hidden" name="scode" value="<%=scode%>" title="사이트코드" /><input type="hidden" name="pcode" value="<%=pcode%>" title="페이지코드"  /><input type="hidden" name="pstate" value="<%=pstate%>" title="페이지상태"  /><input type="hidden" name="curr_page" value="<%=curr_page%>" title="현재페이지번호"  /><input type="hidden" name="show_rows" value="<%=show_rows%>" title="현재페이지당데이터수"  /><input type="hidden" name="se_field" value="<%=se_field%>" title="검색컬럼"  /><input type="hidden" name="se_text" value="<%=se_text%>" title="검색단어"  /><input type="hidden" name="se_code" value="<%=se_code%>" title="검색코드"  /><input type="hidden" name="sidx" value="<%=rIDX%>"><!--supply_box--><div class="supply_box">	<!--//board_A0_write-->	<div class="board_A0_W">		<table summary="상세보기">		  <caption>게시판 상세조회 - 제목, 작성자, 등록일, 게시구분으로 구성</caption>	      <colgroup>	      <col width="10%" />	      <col width="*" />	      <col width="10%" />	      <col width="20%" />	      </colgroup>		    <tr>		      <td colspan="4" style="background-Color:#30568F;color:#ffffff;text-align:center;"><strong>원 문</strong></td> 		    </tr> 		  		    <tr>		      <th>제목</th>		      <td colspan="3">		      	<%=rB_TITLE%>		      </td>		    </tr>		    <tr>		      <th>작성자</th>		      <td><%=rREG_NAME%>		      </td>		      <th>등록일</th>		      <td><%=rREG_DT%>		      </td>		    </tr>		    <tr>		      <!-- <th>이메일</th>		      <td><%=rREG_MAIL%>		      </td> -->		      <th>게시구분</th>		      <td colspan="3"><%=rGESI_FL_NM %>		      </td>		    </tr>    		    		    <%			// 추가컬럼의 출력여부를 확인하여 출력한다			for(i=0;i<=9;i++){					//System.out.println(i+":"+BOARD_ETC_ITEM);				//System.out.println(i+":"+BOARD_ETC_ITEM_ARR[i]);				if(BOARD_ETC_ITEM_ARR[i].equals("Y")){			%>		    <tr>		      <th><%=BOARD_ETC_ITEM_NM_ARR[i] %></th>		      <td colspan="3">		      <%		      // 문자		      if(BOARD_ETC_ITEM_TY_ARR[i].equals("V")){		      %>		      <%=rB_ETC_ARR[i]%>		      <%		      // 숫자형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("N")){		      %>		      <%=rB_ETC_ARR[i]%>		      <%		      // 날짜형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("D")){		      %>		      <%=rB_ETC_ARR[i]%>		      <%		      // 코드형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("C")){		      	code_select_List = (List)rtn_Map.get("ListTreeETC"+i);		        if(code_select_List!=null){		      		for(j=0;j<code_select_List.size();j++){		      			rtn_row_map2 = (Map)code_select_List.get(j);		      			if(rB_ETC_ARR[i].equals((String)rtn_row_map2.get("CODE_C"))){		      	%>		      	<%=rtn_row_map2.get("CODE_NM")%>		      	<%		      			}		      		}		      	}		      }		      %>      	  		      </td>		    </tr>			<%				}			}		    %>		    <tr>		      <th>첨부파일</th>		      <td colspan="3">			<span>			<%			String fext = "";  // 파일 확장자			if(getABDFiles!=null){				for(j=0;j<getABDFiles.size();j++){					rtn_row_map2  = (Map)getABDFiles.get(j);					//IDX, M_CODE, RIDX, FILE_NM, RFILE_NM , ORDER_NO,					if( !(rtn_row_map2.get("fileNm")==null) && !((String)rtn_row_map2.get("fileNm")).equals("")){						fext = ((String)rtn_row_map2.get("fileNm")).substring(((String)rtn_row_map2.get("fileNm")).indexOf(".")+1).toLowerCase();			%>			<a href="#none" onclick="GoDownfile('<%=pcode%>','<%=rtn_row_map2.get("ridx")%>','<%=rtn_row_map2.get("orderNo")%>')" title="<%=rtn_row_map2.get("fileNm") %>파일다운로드">			    	<%			    			  // 엑셀			    			  if(fext.equals("xls") || fext.equals("xlsx")){			    	%>			    			      <span class="exel" >엑셀파일</span>			    	<%    				  			    			  // pdf			    			  }else if(fext.equals("pdf")){			    	%>			    			      <span class="pdf" >pdf파일</span>			    	<%    				  			        		  // doc			    			  }else if(fext.equals("doc") || fext.equals("docs")){   			    	%>			    			      <span class="word" >워드파일</span>			    	<%    				  			            	  // ppt			    			  }else if(fext.equals("ppt") || fext.equals("ppts")){ 			    	%>			    			      <span class="ppt" >ppt파일</span>			    	<%    				  			        	      // pdf			    			  }else if(fext.equals("hwp")){    				  			      	%>			      				  <span class="han" >pdf파일</span>			      	<%			      			  // else			    			  }else {    				  			      	%>			      				  <span class="filei" >파일</span>			      	<%      			    		  	  }			    	%>						<%=rtn_row_map2.get("fileNm") %></a><br>			<%					}				}			}			%>				</span>				    		      </td>		    </tr>    			<tr>				<td colspan="4"><%=rB_CONTENTS.replaceAll("\"","'").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&").replaceAll("\r\n","<br />") %>				</td>			</tr>		</table>		</div>		<!--//board_A0_write-->						<div class="board_A0_W">		<table summary="상세보기">		  <caption>게시판 답변등록 - 제목, 작성자, 등록일로 구성</caption>	      <colgroup>	      <col width="10%" />	      <col width="*" />	      <col width="10%" />	      <col width="20%" />	      </colgroup>		    <tr>		      <td colspan="4" style="background-Color:#30568F;color:#ffffff;text-align:center;text-weight:bold;"><strong>답 변</strong></td> 		    </tr> 		  		    <tr>		      <th>제목</th>		      <td colspan="3">		      	<input type="text" class="in" name="B_TITLE" value="<%=(BOARD_TY.equals("000052")?"":"[답변] ") %><%=rB_TITLE%>" style="vertical-align:middle;width:95%;" maxlength="300" title="제목" />		      </td>		    </tr>		    <tr>		      <th>작성자</th>		      <td>		      	<%-- <input name="REG_NAME" type="text" value="<%=reREG_NAME%>" title="이름입력" /> --%>		      	<%=reREG_NAME%>		      </td>		      <th>등록일</th>		      <td>		      	<input name="REG_DT" id="REG_DT" type="text" value="<%=reREG_DT%>" readonly onclick="Calendar_D(this);" title="등록일 입력" />		      	<span class="btnIc_calendar"><a href="#" onclick="Calendar_D(document.getElementById('REG_DT'));return false;"></a></span>		      </td>		    </tr>		    		    <tr>		      <!-- <th>이메일</th>		      <td colspan="3"><input type="text" id="REG_MAIL1" name="REG_MAIL1" maxlength="30" title="이메일 아이디명 입력" onkeyup="char_chk(this);" value="<%=reREG_MAIL_sp[0]%>" style="vertical-align:middle;height:22px;" />@ 					<input type="text" id="REG_MAIL2" name="REG_MAIL2" maxlength="30" title="이메일 도메인 입력" onkeyup="char_chk(this);" value="<%=reREG_MAIL_sp[1]%>" style="display: none;vertical-align:middle;height:22px;" />					<span id="SEL_DIVS1"></span>		      </td> -->	          <input type="hidden" id="REG_MAIL1" name="REG_MAIL1" title="이메일 아이디명 입력" value=""  />			  <input type="hidden" id="REG_MAIL2" name="REG_MAIL2" title="이메일 도메인 입력" value="" />		      		      <!-- 답변글은 게시구분을 선택할수 없고 원글의 게시구분이 P일경우 원글과 동일하게 셋팅한다 -->		      <input type="hidden" name="GESI_FL" title="게시구분" value="<%if(rGESI_FL.equals("P")){ %>P<%}else{ %>Y<%} %>" />		      <input type="hidden" name="PASSWD" title="비밀번호" value="<%if(rGESI_FL.equals("P")){ %><%=rPASSWD %><%}else{ %><%} %>" />		      <!-- <th>게시구분</th>		      <td><select name="GESI_FL" title="게시구분" style="vertical-align:middle;height:22px;">		      <option value="Y" >일반게시</option>		      <option value="N" >숨김</option>		      <option value="T" >공지글</option>		      <option value="P" >비공개</option>		      </select>		      </td>-->		    </tr> 		    		    <%		    //답변형일 경우 추가컬럼 제외		    if(!BOARD_TY.equals("000012")){		    			// 추가컬럼의 출력여부를 확인하여 출력한다			for(i=0;i<=9;i++){					if(BOARD_ETC_ITEM_ARR[i].equals("Y")){			%>		    <tr>		      <th><%=BOARD_ETC_ITEM_NM_ARR[i] %></th>		      <td colspan="3">		      <%		      // 문자		      if(BOARD_ETC_ITEM_TY_ARR[i].equals("V")){		      %>		      <input name="<%="B_ETC"+(i) %>" type="text" value="<%=rB_ETC_ARR[i]%>" style="vertical-align:middle;width:200px;height:22px;" title="<%=BOARD_ETC_ITEM_NM_ARR[i] %>입력" />		      <%		      // 숫자형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("N")){		      %>		      <input name="<%="B_ETC"+(i) %>" type="text" value="<%=rB_ETC_ARR[i]%>" style="vertical-align:middle;width:200px;height:22px;ime-mode: disabled;" onKeyDown="return onlyNum();" title="<%=BOARD_ETC_ITEM_NM_ARR[i] %>입력" />		      <%		      // 날짜형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("D")){		      %>		      <input name="<%="B_ETC"+(i) %>" type="text" value="<%=rB_ETC_ARR[i]%>" style="vertical-align:middle;width:200px;height:22px;" readonly onClick="Calendar_D(this);" title="<%=BOARD_ETC_ITEM_NM_ARR[i] %>입력" />		      <%		      // 코드형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("C")){		      %>		      <select name="<%="B_ETC"+(i) %>" title="<%=BOARD_ETC_ITEM_NM_ARR[i] %>선택" style="vertical-align:middle;width:200px;height:22px;">		      <option value="">선택</option>		      <%		      	code_select_List = (List)rtn_Map.get("ListTreeETC"+i);		        if(code_select_List!=null){		      		for(j=0;j<code_select_List.size();j++){		      			rtn_row_map2 = (Map)code_select_List.get(j);		      	%>		      	<option value="<%=rtn_row_map2.get("CODE_C")%>" <%if(rB_ETC_ARR[i].equals((String)rtn_row_map2.get("CODE_C"))){ %>selected="selected"<%} %>><%=rtn_row_map2.get("CODE_NM")%></option>		      	<%		      		}		      	}		      %>		      </select> 		      <%		      }		      %>      	  		      </td>		    </tr>			<%				}			}					    } //답변형일 경우 추가컬럼 제외			%>       		      			<tr><%						// 에디터 환경설정						String editor_table_size = "100%";						String editor_form_content="B_CONTENTS";						String editor_cdiv="cdiv";							String editor_form_name = "listfrm";						String editor_dir_path = "/editer";										%>			  <td scope="row" class="vaT" colspan="4"><textarea name="<%=editor_form_content %>" id="<%=editor_form_content %>" style="width:100%;min-height:450px;"></textarea>			  </td>			</tr>		    <tr>		      <th>첨부파일</th>		      <td colspan="3">		      	<div id="cmfile1"><%-- 			<input type="file" id="B_FILE1" name="B_FILE1" title="첨부파일 찾기" onchange="fileChange(this);return false;" style="width:80%;height:22px;"  />				</div>		        <select id="B_FILE_LIST" size="4" title="첨부파일선택" style="width:80%;height:68px;">		        </select>				<span style="vertical-align:top;"><!--a href="#" onclick="addAPP_F();return false;"><img src="%=img_url%>/cm/plus.gif" border="0" align="absmiddle">추가</a><br-->				<a href="#" onclick="removeB_FILE();return false;"><img src="<%=img_url%>/cm/minus.gif" border="0" align="absmiddle">파일삭제</a>				</span>				<div style="display:none;"><input type="text" name="B_FILES" value="" title="파일객체명" style="width:100%;" />				<input type="text" name="B_FILES_NO" value="1" title="파일번호" style="width:100%;" />				<input type="text" name="B_FILES_DEL_CNT" value="0" title="삭제할 파일갯수" style="width:100%;" />				<input type="text" name="B_FILES_DEL" value="" title="삭제할 파일정보" style="width:100%;" />		 --%>				</div>		      </td>		    </tr>		</table>		</div><!--//board_A0_write-->	    <div class="button a_r mat_30">	    	<a Onclick='Go_wrin(); return false;' href="#" class="btn_1 size_n">저장</a>		    <a Onclick='Go_list(); return false;' href="#" class="btn_2 size_n">목록</a>	    </div>	    		</div>		<!--//supply_box-->	</form>	<script type='text/javascript'>//<![CDATA[	//글등록처리페이지이동	function Go_wrin(){	  su_form=document.writefrm;		//alert("11");		if (isEmpty(su_form.B_TITLE.value)){			alert("제목을 입력해주십시오");			su_form.B_TITLE.focus();			return;		}				if(getLength(su_form.B_TITLE.value) > 300){			alert("제목의 입력내용이 너무 깁니다");			su_form.B_TITLE.focus();			return ;				}	/* 				if (isEmpty(su_form.REG_NAME.value)){			alert("작성자를 입력해주십시오");			su_form.REG_NAME.focus();			return;		}				if(getLength(su_form.REG_NAME.value) > 50){			alert("작성자의 입력내용이 너무 깁니다");			su_form.REG_NAME.focus();			return ;				}*/		if(!isEmpty(su_form.REG_DT.value)){			if(getLength(su_form.REG_DT.value) > 10 ){				lenalert("등록일", 10, 3);				su_form.REG_DT.focus();				return false;			}						if(!isValidDate(StrreplaceAll(su_form.REG_DT.value, "-",""))){				alert("등록일이 유효한 날짜가 아닙니다");				su_form.REG_DT.focus();				return false;			}					}				// textarea에 값 삽입		oEditors.getById["<%=editor_form_content %>"].exec("UPDATE_CONTENTS_FIELD", []);				if(isEmpty(su_form.<%=editor_form_content%>.value)){			   alert('내용을 입력해주세요');			   return;			}				    <%				// 추가컬럼의 출력여부를 확인하여 출력한다		// 답변등록일경우 추가항목을 처리하지않는다		/*		for(i=0;i<=9;i++){				if(BOARD_ETC_ITEM_ARR[i].equals("Y")){		      // 문자		      if(BOARD_ETC_ITEM_TY_ARR[i].equals("V")){		      %>				if(!isEmpty(su_form.<%="B_ETC"+(i) %>.value)){					if(getLength(su_form.<%="B_ETC"+(i) %>.value) > 200 ){						lenalert("<%=BOARD_ETC_ITEM_NM_ARR[i] %>", 200, 1);						su_form.<%="B_ETC"+(i) %>.focus();						return false;					}				}		      <%		      // 숫자형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("N")){		      %>				if(!isEmpty(su_form.<%="B_ETC"+(i) %>.value)){					if(getLength(su_form.<%="B_ETC"+(i) %>.value) > 20 ){						lenalert("<%=BOARD_ETC_ITEM_NM_ARR[i] %>", 20, 2);						su_form.<%="B_ETC"+(i) %>.focus();						return false;					}				}		      <%		      // 날짜형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("D")){		      %>		      if(!isEmpty(su_form.<%="B_ETC"+(i) %>.value)){					if(getLength(su_form.<%="B_ETC"+(i) %>.value) > 10 ){						lenalert("<%=BOARD_ETC_ITEM_NM_ARR[i] %>", 10, 3);						su_form.<%="B_ETC"+(i) %>.focus();						return false;					}										if(!isValidDate(StrreplaceAll(su_form.<%="B_ETC"+(i) %>.value, "-",""))){						alert("<%=BOARD_ETC_ITEM_NM_ARR[i] %>이 유효한 날짜가 아닙니다");						su_form.<%="B_ETC"+(i) %>.focus();						return false;					}							}		      <%		      // 코드형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("C")){		      %>		      if(isEmpty(su_form.<%="B_ETC"+(i) %>.value)){					alert("<%=BOARD_ETC_ITEM_NM_ARR[i] %>을 선택하셔야 합니다.");					su_form.<%="B_ETC"+(i) %>.focus();					return false;							  }		      <%		      }			}		}*/		%>						/*if(!isEmpty(su_form.AM_SDATE.value)){			if(getLength(su_form.AM_SDATE.value) > 10 ){				lenalert("사용시작일", 10, 3);				su_form.AM_SDATE.focus();				return false;			}						if(!isValidDate(StrreplaceAll(su_form.AM_SDATE.value, "-",""))){				alert("사용시작일이 유효한 날짜가 아닙니다");				su_form.AM_SDATE.focus();				return false;			}					}		if(!isEmpty(su_form.AM_EDATE.value)){			if(getLength(su_form.AM_EDATE.value) > 10 ){				lenalert("사용종료일", 10, 3);				su_form.AM_EDATE.focus();				return false;			}						if(!isValidDate(StrreplaceAll(su_form.AM_EDATE.value, "-",""))){				alert("사용종료일이 유효한 날짜가 아닙니다");				su_form.AM_EDATE.focus();				return false;			}					}		// 메뉴 기간이 둘다 입력된경우 확인		if(!isEmpty(su_form.AM_SDATE.value) && !isEmpty(su_form.AM_EDATE.value)){			if(parseInt(StrreplaceAll(su_form.AM_SDATE.value, "-",""),10) > parseInt(StrreplaceAll(su_form.AM_EDATE.value, "-",""),10)){				alert("사용시작일이 사용종료일 이후여야합니다");				su_form.AM_SDATE.focus();				return false;			}		}*/			/*for(fi=0;fi<$('input[type=file]').length;fi++){			alert($('input[type=file]:eq('+fi+')').val()+"::"+$('input[type=file]:eq('+fi+')').attr("name"));		}		return;*/		  su_form.target = "successIframe";			  	su_form.pstate.value='RE';  	  su_form.action='<%=RequestURL%>';	  su_form.submit();	  su_form.target = "";	}	function Go_list(){		  su_form=document.writefrm;		  su_form.pstate.value='L';		  su_form.action='<%=RequestURL%>';		  su_form.submit();		  su_form.target = "";			}    	// 파일다운로드	function GoDownfile(fpcode,sidx,fidx){		url = "<%=RequestURL%>?scode=000008&pcode=000015&pstate=FILEDOWN"+"&fpcode="+fpcode+"&sidx="+sidx+"&fidx="+fidx;		document.getElementById("successIframe").src = url;			}    //=== 영문, 숫자 혼용 확인    // 혼용이면 true, 아니면 false    function engnum_mix_chk(str)    {    	var chk_num = str.search(/[0-9]/g);    	var chk_eng = str.search(/[a-z]/ig);    	if(chk_num < 0 || chk_eng < 0)    	{    		return false;    	}    	return true;    }			    function onlyEng(objtext1) {	    var inText = objtext1.value;	    var ret;		    for (var i = 0; i < inText.length; i++) {	       ret = inText.charCodeAt(i);	      if ((ret > 122) || (ret < 48) || (ret > 57 && ret < 65) || (ret > 90 && ret < 97)) {	         alert("영문자와 숫자만을 입력하세요");	         objtext1.value = "";	         objtext1.focus();	         return false;	      }	    }	    return true;    }    function Chg_0000000012SEL_DIVS1(obj){    	var v = obj.value;    	var email2_2 = document.getElementById("REG_MAIL2");    	email2_2 = (obj.value=='000024'? email2_2.style.display='' : email2_2.style.display='none');     }			    function Set_0000000012(){    	sel_cnt = 0;    	for(i=0;i< document.getElementsByName("dto_SELMENU1_0")[0].length;i++){    		if(document.getElementsByName("dto_SELMENU1_0")[0].options[i].text == '<%=reREG_MAIL_sp[1]%>' && ''!= '<%=reREG_MAIL_sp[1]%>'){    			document.getElementsByName("dto_SELMENU1_0")[0].options.selectedIndex = i ;    			sel_cnt++;    		}    	}    	//alert(sel_cnt);    	if(sel_cnt == 0){    		selOrign("dto_SELMENU1_0","000024");    		Chg_0000000012SEL_DIVS1(document.getElementsByName("dto_SELMENU1_0")[0]);    	}    }    	function containsChars(obj, chars){				for(var inx=0; inx < obj.value.length; inx++){			if(chars.indexOf(obj.value.charAt(inx)) != -1)return false;		}		return true;	}  		///////////////////////////////////////////// 첨부파일관련 //////////////////////////////////////////////////* function fileChange(obj){	var agt = navigator.userAgent.toLowerCase();	var brow_kind = "";	if (agt.indexOf("msie") != -1) brow_kind =  'Internet Explorer'; 	// IE10이하	//if(brow_kind == 'Internet Explorer'){		//alert("1111");		var val = $(obj).val().split("\\");		var filename = val[val.length-1];		var fileType = "";		//fileType = filename.substring(filename.length -3,filename.length);		fileType = filename.substring(filename.lastIndexOf("."),filename.length);		fileType = fileType.toUpperCase();        //alert('fileType='+fileType);		if(			 	!fileType.match(/GIF/)				&& !fileType.match(/JPG/)				&& !fileType.match(/BMP/)				&& !fileType.match(/PNG/)				&& !fileType.match(/HWP/)				&& !fileType.match(/XLS/)				&& !fileType.match(/XLSX/) //XLSX				&& !fileType.match(/ZIP/)				&& !fileType.match(/PDF/)				&& !fileType.match(/TIF/)				&& !fileType.match(/DOC/)				&& !fileType.match(/DOCX/)				&& !fileType.match(/PPT/)				&& !fileType.match(/PPTX/)				&& !fileType.match(/TXT/)				&& !fileType.match(/ZIP/)				&& !fileType.match(/ALZ/)		) {			// 파일객체를 삭제한다			$('input[type=file]').last().remove(); 						// 파일객체가 한개도 안남아있을시 새로 생성한다			if($('input[type=file]').length < 1){				$('#fileArea').html('<input type="file" id="B_FILE'+(parseInt($('input[name=B_FILES_NO]').val())+1)+'" name="B_FILE'+(parseInt($('input[name=B_FILES_NO]').val())+1)+'" title="첨부파일 찾기" onchange="fileChange(this);return false;" style="width:80%;height:22px;"  />');			}else{//파일객체의 순번을 조절한다				$('input[type=file]').first().before('<input type="file" id="B_FILE'+(parseInt($('input[name=B_FILES_NO]').val())+1)+'" name="B_FILE'+(parseInt($('input[name=B_FILES_NO]').val())+1)+'" title="첨부파일 찾기" onchange="fileChange(this);return false;" style="width:80%;height:22px;"  />');			}									alert('지정되지 않은 파일 타입입니다.!');			return;		}					// 현재추가한 파일의 인덱스		var idx = $('input[type=file]').index(obj);		// 새로 파일객체를 추가한다		var fArea = $(obj).closest('#fileArea');		fArea.append('<input type="file" id="B_FILE'+(parseInt($('input[name=B_FILES_NO]').val())+1)+'" name="B_FILE'+(parseInt($('input[name=B_FILES_NO]').val())+1)+'" title="첨부파일 찾기" onchange="fileChange(this);return false;" style="width:80%;height:22px;"  />');		//var val = $(obj).val().split("\\");		//var filename = val[val.length-1];		$('select[id=B_FILE_LIST]').append("<option value=\"\">"+filename+"</option>");		//alert($('input[name=B_FILES]').val().split("::").length);		if(isEmpty($('input[name=B_FILES]').val())){			$('input[name=B_FILES]').val($(obj).attr("name"));		}else{			$('input[name=B_FILES]').val($('input[name=B_FILES]').val()+"::"+$(obj).attr("name"));		}		$('input[name=B_FILES_NO]').val(parseInt($('input[name=B_FILES_NO]').val())+1);						// 현재추가한 파일객체를 숨긴다		$('input[type=file]:eq('+idx+')').hide();	// 그외 브라우저	//} 			  }//파일삭제function removeB_FILE() {    if ($("#B_FILE_LIST option").index($("#B_FILE_LIST option:selected")) != -1 ) {        var str = $("#B_FILE_LIST option:selected").text();        var sindex = $("#B_FILE_LIST option").index($("#B_FILE_LIST option:selected"));         $("#B_FILE_LIST option").index(null);        // 선택된 셀렉트박스의 value값이 있을경우 수정할 데이터의 첨부파일삭제이므로 해당 정보를 저장한다                if(!isEmpty($("#B_FILE_LIST option:selected").val())){        	if(isEmpty($('input[name=B_FILES_DEL]').val())){        		$('input[name=B_FILES_DEL]').val($("#B_FILE_LIST option:selected").val());         	}else{        		$('input[name=B_FILES_DEL]').val($('input[name=B_FILES_DEL]').val()+"::"+$("#B_FILE_LIST option:selected").val());         	}        	        }        $("#B_FILE_LIST option:selected").remove();        //alert(sindex);        // 선택된 file객체를 삭제한다        var bfiles = $('input[name=B_FILES]').val().split("::");		var mbfiles = "";		//alert(bfiles.length);		sindex = sindex - parseInt($('input[name=B_FILES_DEL_CNT]').val(),10);		for(rf=0;rf<bfiles.length;rf++){			if(rf!=sindex){					if(isEmpty(mbfiles)){						mbfiles = bfiles[rf];					}else{						mbfiles = mbfiles+"::"+bfiles[rf];					}							}					}        $('input[name=B_FILES]').val(mbfiles);               	if(sindex >= 0){		       		$('input[type=file]:eq('+sindex+')').remove();     	}        // 파일객체가 없으면 파일객체는 1개를 남겨놓는다        //alert($('input[type=file]').length);        if($('input[type=file]').length < 1){    		$('#fileArea').html('<input type="file" id="B_FILE'+(parseInt($('input[name=B_FILES_NO]').val())+1)+'" name="B_FILE'+(parseInt($('input[name=B_FILES_NO]').val())+1)+'" title="첨부파일 찾기" onchange="fileChange(this);return false;" style="width:80%;height:22px;"  />');        }        } else {        alert("삭제할 첨부파일을 먼저 선택해 주세요.");    }} *////////////////////////////////////////////// 첨부파일관련 /////////////////////////////////////////////////	var oEditors = [];		nhn.husky.EZCreator.createInIFrame({	    oAppRef: oEditors,	    elPlaceHolder: "<%=editor_form_content %>",	    sSkinURI: "<%=con_root%>/smarteditor/SmartEditor2Skin.html",	    fCreator: "createSEditor2",	    htParams: {fOnBeforeUnload:function(){}}		});		$(document).ready(function() {		// 화면이 로드될경우 초기셋팅값을 보여준다		//Set_0000000012();					});	//]]></script>