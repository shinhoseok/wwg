<%--/*=================================================================================*//* 시스템            : JRCMS 시스템 SYSTEM/* 프로그램 아이디   : /* 프로그램 이름     : jicm_abd_010_r1    /* 소스파일 이름     : jicm_abd_010_r1.jsp/* 설명              : SYSTEM 게시판관리 상세조회페이지/* 버전              : 1.0.0/* 최초 작성자       : 이금용/* 최초 작성일자     : 2016-11-16/* 최근 수정자       : 이금용/* 최근 수정일시     : 2016-11-16/* 최종 수정내용     : 최초작성/*=================================================================================*/--%><%@page pageEncoding="utf-8"%><div class="supply_box">	<form action="<c:out value='${basePath}'/>/cmsmain.do" name="updateForm" id="updateForm" enctype="multipart/form-data" method="post">		<input type="hidden" 	id="scode"  					name="scode" 				value="<c:out value='${scode}'/>" title="사이트코드" />		<input type="hidden" 	id="pcode"  					name="pcode" 				value="<c:out value='${pcode}'/>" title="페이지코드" />		<input type="hidden" 	id="pstate"  					name="pstate" 				value="<c:out value='${pstate}'/>" title="페이지상태" />		<input type="hidden" 	id="pageIndex" 					name="pageIndex" 			value="<c:out value='${R_MAP.param.pageIndex}'/>"/>		<input type="hidden" 	id="searchGubun" 				name="searchGubun" 			value="<c:out value='${R_MAP.param.searchGubun}'/>" />		<input type="hidden" 	id="searchValue" 				name="searchValue" 			value="<c:out value='${R_MAP.param.searchValue}'/>" />		<input type="hidden" 	id="dataSeqno" 					name="dataSeqno" 			value="<c:out value='${R_MAP.resultVO.dataSeqno}'/>" />		<div class="board_A0_W">			<table class="defaultTable02">				<caption>게시판 수정</caption>				<colgroup>					<col width="10%">					<col width="40%">					<col width="10%">					<col width="40%">				</colgroup>				<thead>				</thead>				<tbody>					<tr>						<th>제목</th>						<td colspan="3">							<input name="dataTitle" id="dataTitle" title="제목"  type="text" maxlength="300" value="<c:out value="${R_MAP.resultVO.dataTitle}" />" style="width: 100%;">						</td>					</tr>					<tr>						<th>작성자</th>						<td><c:if test="${empty R_MAP.resultVO.regNm}">-</c:if><c:out value="${R_MAP.resultVO.regNm}" /></td>						<th>작성일</th>						<td><c:if test="${empty R_MAP.resultVO.regDt}">-</c:if><c:out value="${R_MAP.resultVO.regDt}" /></td>					</tr>					<tr>						<th>첨부파일</th>						<td colspan="3" style="height: 150px;">							<div id="cmfile1">								<div id="div_in_file">								<label class="inputFile_label" for="inputFile_label" onclick="fn_input_file();">첨부파일</label>									<input name="" id="input_file" title="첨부파일 찾기" class="inputFile" style="width: 90%;display:none;" type="file" multiple="multiple">								</div>									파일은 <span class="pointR" style="margin-top: 0px; display: inline;">최대 <c:out value='${MENUCFG.isFileCnt}'/>개</span> 까지, 용량은									<span class="pointR" style="margin-top: 0px; display: inline;">300MB까지</span>									가능(첨부가능파일:GIF,JPG,JPEG,BMP,PNG,HWP,XLS,XLSX,ZIP,PDF,TIF,DOC,DOCX,PPT,PPTS,PPTX,TXT)								</p>								<div id="dropZone">									<div id="fileDragDesc"></div>									<table id="fileListTable" style="width: 100%; border: 0px;">										<tbody id="fileTableTbody"></tbody>									</table>								</div>							</div>						</td>					</tr>					<tr>						<td colspan="4">							<textarea rows="5" cols="5" style="width: 100%; height: 300px;" id="dataDesc" name="dataDesc"><c:out value="${R_MAP.resultVO.dataDesc}" /></textarea>						</td>					</tr>				</tbody>			</table>		</div>	</form>	<div class="button a_r mat_30">		<a class="btn_1 size_n" onclick="javascript:fn_updateBoardProc();" href="javascript:void(0);">수정</a>		<a class="btn_2 size_n" onclick="javascript:fn_selectBoardList();" href="javascript:void(0);">목록</a>	</div></div><script>$(document).ready(function () {	fileDropDown("dropZone"); //파일 드롭다운	<c:forEach var="list" items="${R_MAP.fileList}">		var obj = {}		obj.name = "<c:out value='${list.fileNm}'/>";		obj.fileSeqno = "<c:out value='${list.fileSeqNo}'/>";		obj.size = "<c:out value='${list.fileSize}'/>";		fileArr.push(obj);	</c:forEach>	selectFile(fileArr);});var oEditors = [];nhn.husky.EZCreator.createInIFrame({    oAppRef: oEditors,    elPlaceHolder: "dataDesc",    sSkinURI: "<c:out value='${basePath}'/>/se290/EditorSkin.ko.jsp",    fCreator: "createSEditor2",    htParams: {fOnBeforeUnload:function(){}}	});//목록이동var fn_selectBoardList = function() {	var frm = document.updateForm;	frm.pstate.value="L";	frm.submit();};//수정var fn_updateBoardProc = function() {	var dataTitle = $("#dataTitle").val();		if(dataTitle == '' || dataTitle == null){		alert("제목을 입력하여 주십시오.");		$("#dataTitle").focus();		return;	}		oEditors.getById["dataDesc"].exec("UPDATE_CONTENTS_FIELD", []);	var dataDesc = $("#dataDesc").val();		var uploadFileList = Object.keys(fileList);	if(totalFileSize > maxUploadSize) {		alert("총  용량 초과\n총 업로드 가능 용량 : "+maxUploadSize+" MB");		return;	}		var delFileSeqList = []; //삭제를 위한 시퀀스	var delFieGroupSeq = "";	if(deleteFileArr.length > 0) {		for(var i=0; i<deleteFileArr.length; i++) {			delFileSeqList.push(deleteFileArr[i].fileSeqno);		}	}		if(fn_getBrowser() == "IE") {		var form = $("#updateForm");		var formData = new FormData(form);				for(var i=0; i<uploadFileList.length; i++) {			formData.append('files', fileList[uploadFileList[i]]);		}				formData.append('regDt', $("#regDt").val());		formData.append('delFileSeqList', delFileSeqList);		formData.append('dataSeqno', $("#dataSeqno").val());		formData.append('dataTitle', $("#dataTitle").val());		formData.append('dataDesc', dataDesc);		formData.append('menuCd', $("#pcode").val());		formData.append('boardNm', "<c:out value='${MENUCFG.menuNm}'/>");		if(!typeof dataSpaCol0 == "undefined"){			formData.append('dataSpaCol0', dataSpaCol0);		}		if(!typeof dataSpaCol1 == "undefined"){			formData.append('dataSpaCol1', dataSpaCol1);		}		if(!typeof dataSpaCol2 == "undefined"){			formData.append('dataSpaCol2', dataSpaCol2);		}		formData.append('openYn', "Y");		} else {		var formData = new FormData(document.getElementById("updateForm"));		for(var i=0; i<uploadFileList.length; i++) {			if(i == 0) {				formData.set('files', fileList[uploadFileList[i]]);			} else {				formData.append('files', fileList[uploadFileList[i]]);			}		}				formData.set('regDt', $("#regDt").val());		formData.set('delFileSeqList', delFileSeqList);		formData.set('dataSeqno', $("#dataSeqno").val());		formData.set('dataTitle', $("#dataTitle").val());		formData.set('dataDesc', dataDesc);		formData.set('menuCd', $("#pcode").val());		formData.set('boardNm', "<c:out value='${MENUCFG.menuNm}'/>");		if(!typeof dataSpaCol0 == "undefined"){			formData.set('dataSpaCol0', dataSpaCol0);		}		if(!typeof dataSpaCol1 == "undefined"){			formData.set('dataSpaCol1', dataSpaCol1);		}		if(!typeof dataSpaCol2 == "undefined"){			formData.set('dataSpaCol2', dataSpaCol2);		}		formData.set('openYn', "Y");	}		$("#pstate").val("");	var url = "<c:out value='${basePath}'/>/admin/board/updateBoardProc.do";	fn_uploadFile(formData, url);};//파일 한개씩업로드var fn_input_file = function () {	$("#input_file").click();}$("#input_file").bind('change', function() {	selectFile(this.files);});</script>