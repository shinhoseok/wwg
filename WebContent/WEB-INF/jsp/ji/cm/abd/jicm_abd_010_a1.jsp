<%--/*=================================================================================*//* 시스템            : JRCMS 시스템 SYSTEM/* 프로그램 아이디   : /WEB-INF/jsp/ji/cm/abd/jicm_abd_010_a1.jsp /* 프로그램 이름     : jicm_abd_010_m1    /* 소스파일 이름     : jicm_abd_010_m1.jsp/* 설명              : SYSTEM 게시판 사용자등록, 수정페이지/* 버전              : 1.0.0/* 최초 작성자       : 이금용/* 최초 작성일자     : 2016-11-16/* 최근 수정자       : 이금용/* 최근 수정일시     : 2016-11-16/* 최종 수정내용     : 최초작성/*=================================================================================*/--%><%@page pageEncoding="utf-8"%><%List code_select_List = null; // 셀렉트박스 생성용 코드리스트List subauth_List = null; // 부분관리자 권한리스트List chk_up_code_List = new ArrayList();List getABDFiles = null; // 첨부파일정보Map rtn_row_map2 = new HashMap();Map rtn_row_map3 = new HashMap();	//회원사 정보Map rtn_row_map4 = new HashMap();	//회원사 정보Map ETC_CODE_MAP = new HashMap();String javasc_arr_nm = "";String select_nm = ""; String inhtml_id = "";String init_code_param = "";String onchg_func_nm = "";int cprev_lv = 0;int ctmp_lv = 0;int cinit_lv = 0;int ic = 0;int j = 0;int rIDX		= 0;String rM_CODE	= "";String rM_NM 	= "";String rREG_DT	= "";String rMOD_DT	= "";  String rREG_ID	= "";String rMOD_ID	= "";String rB_TITLE	= "";	String rB_CONTENTS	= "";int rREAD_CNT	= 0;int rR_IDX	= 0;int rR_DEPTH	= 0;String rDATA_IPNS	= "";String rGESI_FL	= "";String rGESI_FL_NM	= "";String rREG_NAME	= "";String rREG_MAIL	= "@";String rB_SDATE	= "";String rB_EDATE	= "";String rREG_TEL	= "";String rREG_HAND	= "";String rREG_IP	= "";String rREG_PHOTO_ALT	= "";String rREG_SVNUMBER	= "";String [] rB_ETC_ARR	= new String[10];String rFILE_NMS	= "";String [] rFILE_NMS_arr = null;String display_none = "";int file_del_cnt = 0;if(pstate.equals("UF")){	rtn_row_Map = (Map)rtn_Map.get("getABD"); // 조회된 상세내용/* 	getABDFiles = (List)rtn_Map.get("getABDFiles"); // 조회된 파일정보 */	if(getABDFiles == null ){		file_del_cnt = 0;	}else{		//file_del_cnt = getABDFiles.size();	}	rIDX	= Integer.parseInt(HtmlTag.returnString(String.valueOf(rtn_row_Map.get("DATA_SEQNO")),"0"),10);	rM_CODE	= HtmlTag.returnString((String)rtn_row_Map.get("MENU_CD"),"");	rM_NM 	= HtmlTag.returnString((String)rtn_row_Map.get("MENU_NM"),"");	rREG_DT	= HtmlTag.returnString((String)rtn_row_Map.get("REG_DT"),"");	rREG_ID	= HtmlTag.returnString((String)rtn_row_Map.get("REG_ID"),"");	rB_TITLE	= HtmlTag.returnString((String)rtn_row_Map.get("DATA_TITLE"),"");		rB_CONTENTS	= HtmlTag.returnString((String)rtn_row_Map.get("DATA_DESC"),"");	rREAD_CNT	= Integer.parseInt(HtmlTag.returnString(String.valueOf(rtn_row_Map.get("INQ_CNT")),"0"),10);	rR_IDX	= Integer.parseInt(HtmlTag.returnString(String.valueOf(rtn_row_Map.get("DATA_ORIGIN_NO")),"0"),10);	rR_DEPTH	= Integer.parseInt(HtmlTag.returnString(String.valueOf(rtn_row_Map.get("DATA_DEPTH")),"0"),10);	rGESI_FL	= HtmlTag.returnString((String)rtn_row_Map.get("OPEN_YN"),"");	rGESI_FL_NM	= HtmlTag.returnString((String)rtn_row_Map.get("OPEN_YN_NM"),"");	rREG_NAME	= HtmlTag.returnString((String)rtn_row_Map.get("REG_ID_NM"),"");	rB_SDATE	= HtmlTag.returnString((String)rtn_row_Map.get("DATA_SPA_ST_DT"),"");	rB_EDATE	= HtmlTag.returnString((String)rtn_row_Map.get("DATA_SPA_END_DT"),"");	rREG_PHOTO_ALT	= HtmlTag.returnString((String)rtn_row_Map.get("PHOTO_IMAGE_ALT"),"");	for(i=0;i<10;i++){		rB_ETC_ARR[i] = HtmlTag.returnString((String)rtn_row_Map.get("DATA_SPA_COL"+i),"");	}	rFILE_NMS = HtmlTag.returnString((String)rtn_row_Map.get("FILE_NMS"),"");	rFILE_NMS_arr = HtmlText.split(rFILE_NMS,"::");}else{	rREG_NAME	= HtmlTag.returnString((String)SITE_SESSION.get("USER_NM"),"");	rREG_DT		= curDate.substring(0,4)+"-"+curDate.substring(4,6)+"-"+curDate.substring(6,8);	rB_SDATE	= HtmlTag.returnString((String)rtn_Map.get("rdate"),"");	for(i=0;i<10;i++){		rB_ETC_ARR[i] = "";	}}// 이메일주소코드셀렉트박스를 셋팅한다code_select_List = (List)rtn_Map.get("ListTree0000000012"); // 조회된 리스트javasc_arr_nm = "treemenuval_1";select_nm = "dto_SELMENU1_";inhtml_id = "SEL_DIVS1";init_code_param = "";onchg_func_nm = "Chg_0000000012";// 이메일주소셀렉트박스생성은 막아놓는다%><%--@include file="/WEB-INF/jsp/cm/CmCodeSelect.jsp"--%><%// 임시항목의 컬럼에 사용할 코드를 셋팅한다for(i=0;i<=9;i++){		// 임시컬럼의 사용여부가 Y이면	if(BOARD_ETC_ITEM_ARR[i].equals("Y")){		// 임시컬럼의 데이터타입이 C(코드)이면		if(BOARD_ETC_ITEM_TY_ARR[i].equals("C")){			ETC_CODE_MAP.put("ListTreeETC"+i, (List)rtn_Map.get("ListTreeETC"+i));			}	}}%><script language="javascript" src="<%=con_root%>/js/com-file.js"></script>	<script type="text/javascript" src="<%=con_root%>/smarteditor/js/HuskyEZCreator.js"></script><script type="text/javascript">$(function(){		var file2 = $.fn.cmfile.init({			  id			: 'cmfile1' 			 ,onclickNamefn	: "fileNameClick1"			 ,img_url 		: "<%=img_url%>"			 ,uploadcnt		: <%=uploadcnt%>			 <%			 // 공지형, 자유형, 답변형, faq			 if(BOARD_TY.equals("000010") || BOARD_TY.equals("000011") || BOARD_TY.equals("000012") || BOARD_TY.equals("000052")){			 %>			 ,extchk		: ['GIF','JPG','BMP','PNG','HWP','XLS','XLSX','ZIP','PDF','TIF','DOC','DOCX','PPT','PPTX','TXT']			 <%			 // 갤러리형			 }else if(BOARD_TY.equals("000013")){			 %>			 ,extchk		: ['GIF','JPG','BMP','PNG']			 <%			 // 동영상형			 }else if(BOARD_TY.equals("000053")){			 %>			 ,extchk		: ['MP4','WMV','OGG','OGV']			 <%			 // 비로그인형			 }else if(BOARD_TY.equals("000417")){			 %>			 ,extchk		: ['GIF','JPG','BMP','PNG','HWP','XLS','XLSX','PDF','DOC','DOCX','PPT','PPTX']			 			 <%			 }			 %>		});			//console.log('file2.extchk=== '+file2.cmfileDefaults['extchk']);		<%		// 동영상형		if(BOARD_TY.equals("000053")){		%>				var file3 = $.fn.cmfile.init({			 id				: 'cmfile2' 			 ,onclickNamefn	: "fileNameClick2"			 ,img_url 		: "<%=img_url%>"			 ,uploadcnt		: 1			 ,extchk		: ['GIF','JPG','BMP','PNG']		});			<%		// 동영상형		}		%>		});</script><!--목록시작--><form name="writefrm" id="writefrm" method="post"  enctype="multipart/form-data" onsubmit="return false;">     <input type="hidden" name="scode" value="<%=scode%>" title="사이트코드" /><input type="hidden" name="pcode" value="<%=pcode%>" title="페이지코드"  /><input type="hidden" name="pstate" value="<%=pstate%>" title="페이지상태"  /><input type="hidden" name="curr_page" value="<%=curr_page%>" title="현재페이지번호"  /><input type="hidden" name="show_rows" value="<%=show_rows%>" title="현재페이지당데이터수"  /><input type="hidden" name="se_field" value="<%=se_field%>" title="검색컬럼"  /><input type="hidden" name="se_text" value="<%=se_text%>" title="검색단어"  /><input type="hidden" name="se_code" value="<%=se_code%>" title="검색코드"  /><input type="hidden" name="sidx" value="<%=rIDX%>"><input type="hidden" name="ichk_secret_no" id="ichk_secret_no" value="">                    <div class="writeArea">                        <table class="tableC">                        	<c:choose>                        		<c:when test="${pcode eq '000100'}">                        			<caption>중소기업 Q&A 작성 - 제목, 작성자, 작성일, 게시구분, 비밀번호, 내용, 첨부파일로  구성</caption>                        		</c:when>                        		<c:otherwise>                        			<caption><%=M_PATH_STR.substring(M_PATH_STR.lastIndexOf("::")+2)%> - 번호, 제목, 첨부파일, 작성일, 조회수로 구성</caption>                        		</c:otherwise>                        	</c:choose>                            <colgroup>                                <col width="15%">                                <col width="35%">                                <col width="15%">                                <col width="35%">                            </colgroup>                            <tbody>                                <tr>                                    <th><%=BOARD_LI_ITEM_NM_ARR[0] %></th>                                    <td colspan="3"><input type="text" id="B_TITLE" name="B_TITLE" value="<%=rB_TITLE%>" maxlength="100" title="제목" style="width:100%;"/></td>                                </tr>                                                            <tr>                                    <th><%=BOARD_LI_ITEM_NM_ARR[1] %></th>                                    <td id="REG_NM_STR">							        	<%							        	if(!BOARD_TY.equals("000417")){							        	%>							        	<%if(pstate.equals("UF")){%><%=rREG_NAME%><%}else{ %><%} %>							        	<input type="hidden" id="REG_NAME" name="REG_NAME" title="작성자명" value="<%if(pstate.equals("UF")){%><%=rREG_NAME%><%}else{ %><%=userNm %><%} %>"  />							        	<%							        	}else{							        	%>							        	<input type="text" id="REG_NAME" name="REG_NAME" title="작성자명" value="<%if(pstate.equals("UF")){%><%=rREG_NAME%><%}else{ %><%} %>"  />							        	<%							        	}							        	%>                                                                        </td>									<th>작성일</th>                                    <td>						 				<%=rREG_DT %>							          	<input type="hidden" id="curDate" name="curDate" title="작성일" value="<%=rREG_DT %>"  />                                                                         </td>                                    	                                                                              </tr>                                						       <%						      // 일정형인 경우						      if(BOARD_TY.equals("000051")){						      %>						      <tr><!-- 일정 -->						        <th>일정</th>						        <td colspan="3">									<input type="text" name="B_SDATE" id="B_SDATE" value="<%=rB_SDATE%>" size="12" onblur="is_valid_date(this);" onkeyup="maskCal();" onfocus="this.select();" title="시작일 입력" />									<span class="btnIc_calendar"><a href="#" onclick="Calendar_D(document.getElementById('B_SDATE'));return false;"></a></span>									<span class="clear"> ~&nbsp;</span> 									<input type="text" name="B_EDATE" id="B_EDATE" value="<%=rB_EDATE%>" size="12" onblur="is_valid_date(this);" onkeyup="maskCal();" onfocus="this.select();" title="시작일 입력" />									<span class="btnIc_calendar"><a href="#" onclick="Calendar_D(document.getElementById('B_EDATE'))return false;"></a></span>						      </tr>						      <%						      }						      %> 						      						      <%						      // 게시구분은 답변형인 경우만 사용자화면에서는 입력이 가능하다						      if(BOARD_TY.equals("000012")){						      %>						      <tr><!-- 게시구분 -->						        <th scope="row"><label for="GESI_FL">게시구분</label></th>						        <td colspan="3">									<div class="rc_box">										<span>											<input type="radio" class="radio_type01" id="GESI_FL1" name="GESI_FL" value="N" checked="checked" />											<label for="GESI_FL1">비공개</label>										</span>										<span>											<input type="radio" class="radio_type01" id="GESI_FL2" name="GESI_FL" value="Y" />											<label for="GESI_FL2">공개</label>										</span>									</div>						      </tr>						      <tr><!-- 비밀번호 -->						        <th scope="row" ><label for="DATA_IPNS"><strong class="pOrg"> </strong>비밀번호</label></th>						        <td colspan="3">									<input type="password" class="input_type01 w_50p" name="DATA_IPNS" id="DATA_IPNS" value="" maxlength="20" title="비밀번호" style=""  />									(비밀번호는 영문,숫자,특수문자 조합으로 9~20자리)						      </tr>						      						    <%						      }else{											        	if(!BOARD_TY.equals("000417")){					   	  						    %>						    <input type="hidden" id="DATA_IPNS" name="DATA_IPNS" value="" title="비밀번호" />						    <input type="hidden" name="GESI_FL" title="게시구분" value="Y" />						    <%						        	}else{						    %>						      <tr><!-- 비밀번호 -->						        <th scope="row" ><label for="DATA_IPNS"><strong class="pOrg"> </strong>비밀번호</label></th>						        <td colspan="3">									<input type="password" class="input_type01 w_50p" name="DATA_IPNS" id="DATA_IPNS" value="" maxlength="20" title="비밀번호" style=""  />									(비밀번호는 영문,숫자,특수문자 조합으로 9~20자리)						      </tr>	    						    <%						        	}						      }						      						     // 게시구분이 답변형인 경우 이메일을 추가한다.						     if(BOARD_TY.equals("000012")){												    %>							<!-- 								<tr>						    	<th>이메일</th>						    	<td colspan="3"><input class="input_type01 w_30p" type="text" id="REG_MAIL" name="REG_MAIL" value="" maxlength="50" title="이메일" /></td>						    </tr> -->						    						    <%						    }							// 추가컬럼의 출력여부를 확인하여 출력한다							for(i=0;i<=9;i++){								if(BOARD_ETC_ITEM_ARR[i].equals("Y")){							%>						    <tr>						      <th><label for="<%="B_ETC"+(i) %>"><%=BOARD_ETC_ITEM_NM_ARR[i] %></label><%if(BOARD_ETC_ITEM_NM_ARR[i].equals("전화번호") || BOARD_ETC_ITEM_NM_ARR[i].equals("이메일") || BOARD_ETC_ITEM_NM_ARR[i].equals("작성자")){ %><strong class="pOrg">*</strong><%} %></th>						      <td colspan="3">						      <%						      // 문자						      if(BOARD_ETC_ITEM_TY_ARR[i].equals("V")){						      %>						      <input id="<%="B_ETC"+(i) %>" name="<%="B_ETC"+(i) %>" type="text" value="<%=rB_ETC_ARR[i]%>"  style="vertical-align:middle;" title="<%=BOARD_ETC_ITEM_NM_ARR[i] %>입력" <%if(BOARD_ETC_ITEM_NM_ARR[i].equals("전화번호")){ %>onkeyup="maskTel(this);" maxlength="13"<%} %>/>						      <%						      // 숫자형						      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("N")){						      %>						      <input id="<%="B_ETC"+(i) %>" name="<%="B_ETC"+(i) %>" type="text" value="<%=rB_ETC_ARR[i]%>"  style="vertical-align:middle;ime-mode: disabled;" onkeyup="inputNum(this);" title="<%=BOARD_ETC_ITEM_NM_ARR[i] %>입력" />						      <%						      // 날짜형						      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("D")){						      %>						      <input id="<%="B_ETC"+(i) %>" name="<%="B_ETC"+(i) %>" type="text" value="<%=rB_ETC_ARR[i]%>"  style="vertical-align:middle;float:left" readonly  title="<%=BOARD_ETC_ITEM_NM_ARR[i] %>입력" dateinp='Y' />						      <%						      // 코드형						      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("C")){						      %>						      	      						      <select id="<%="B_ETC"+(i) %>" name="<%="B_ETC"+(i) %>" title="<%=BOARD_ETC_ITEM_NM_ARR[i] %>선택"  style="vertical-align:middle;">						      <option value="">선택</option>						      <%						      	code_select_List = (List)ETC_CODE_MAP.get("ListTreeETC"+i);						        if(code_select_List!=null){						      		for(j=0;j<code_select_List.size();j++){						      			rtn_row_map2 = (Map)code_select_List.get(j);						      	%>						      	<option value="<%=rtn_row_map2.get("stdinfoDtlCd")%>" <%if(rB_ETC_ARR[i].equals((String)rtn_row_map2.get("stdinfoDtlCd"))){ %>selected="selected"<%} %>><%=rtn_row_map2.get("stdinfoDtlNm")%></option>						      	<%						      		}						      	}						      %>						      </select> 						      <%						      }						      %>      	  						      </td>						    </tr>							<%								}							}							%> 						                                                                     <tr>                                    <td colspan="4">                                       	  		<%													// 에디터 환경설정													String editor_table_size = "100%";													String editor_form_content="B_CONTENTS";													String editor_cdiv="cdiv";														String editor_form_name = "listfrm";													String editor_dir_path = "/editer";																%>												<textarea title="내용입력" name="<%=editor_form_content %>" id="<%=editor_form_content %>" style="width:100%;min-height:350px;"><%=rB_CONTENTS%></textarea>                                    </td>                                </tr>							    <%							    // 첨부기능이 활성화 된경우만 보여준다							    // if(BOARD_OPT_ARR[3].equals("Y")){														    %>							    <tr>							      <th <%if(BOARD_TY.equals("000013") ){  %>rowspan="2"<%}%>><label for="B_FILE_LIST"><%							  		// 갤러리형인경우 대표이미지로 파일한개만 입력할수 있도록 한다							  		if(BOARD_TY.equals("000013") ){      							      %>대표이미지<%							      	// 동영상형							  		}else if(BOARD_TY.equals("000053") ){							  	  %>동영상<%								      	}else{ 							      %>첨부파일<%							      } 							      %></label></th>							      <td colspan="3" >							      								      	<div id="cmfile1"></div>							      </td>							    </tr>							    <%							 	// 동영상형							    if(BOARD_TY.equals("000053") ){							    %>							    <tr>							      <th >동영상이미지</th>							      <td colspan="3">									<div id="cmfile2"></div>							      </td>							    </tr>    								<%							    }							  	// 갤러리, 동영상형인경우 대표이미지로 파일한개만 입력할수 있도록 한다							  	if(BOARD_TY.equals("000013") || BOARD_TY.equals("000053")){      							    %>    							    <tr>							      <th ><label for="REG_PHOTO_ALT">이미지설명</label></th>							      <td colspan="3">							 		<input type="text" id="REG_PHOTO_ALT" name="REG_PHOTO_ALT" title="대표이미지설명" value="<%=rREG_PHOTO_ALT %>" style="width:80%;" maxlength="300" />							      </td>							    </tr>        							    <%							    }							    %>                                                            </tbody>                        </table>                    </div>                                        <div class="btnArea">		<%	if(scode.equals("S01")){	%>				<%		// 게시판 종류가 자유형이고 등록자 본인인 경우만 등록가능하다		// 게시판 종류는 000010:공지형 , 000011:자유형 , 000012:답변형, 000013:갤러리형 , 000014:통합형, 000051:일정형, 000052:FAQ형, 000052:동영상형		if(BOARD_TY.equals("000011") || BOARD_TY.equals("000012") || BOARD_TY.equals("000417")){			if(pstate.equals("UF")){	%>			<a href="#" id="btn_modify" class="blueBtn" onclick='Go_wrin<%=pstate%>();return false;'>수정</a>	<%			}else{	%>			<a href="#" id="btn_reg" class="blueBtn" onclick='Go_wrin<%=pstate%>();return false;'>등록</a>	<%						}		}	%>				<a href="#" id="btn_list" class="btnBL" onclick='Go_list();return false;'>목록</a>	<%	}else{	%>				<%			// 게시판 종류가 자유형이고 등록자 본인인 경우만 등록가능하다			// 게시판 종류는 000010:공지형 , 000011:자유형 , 000012:답변형, 000013:갤러리형 , 000014:통합형, 000051:일정형, 000052:FAQ형, 000052:동영상형			if(BOARD_TY.equals("000011") || BOARD_TY.equals("000012")){				if(pstate.equals("UF")){		%>			<a href="#" class="blueBtn" id="btn_modify" onclick='Go_wrin<%=pstate%>();return false;'><strong>수정</strong></a>		<%				}else{		%>			<a href="#" class="blueBtn" id="btn_reg" onclick='Go_wrin<%=pstate%>();return false;'><strong>등록</strong></a>		<%				}			}		%>		<a href="#" class="btnBL" onclick='Go_list();return false;'><strong>목록</strong></a>	<%	}	%>                    </div>	</form><script type='text/javascript'>//<![CDATA[	//글등록처리페이지이동	function Go_wrin<%=pstate%>(){		//alert("111");			  	su_form=document.writefrm;	  			//제목		if (isEmpty(su_form.B_TITLE.value)){			alert("<%=BOARD_LI_ITEM_NM_ARR[0] %>을 입력해주십시오");			su_form.B_TITLE.focus();			return;		}				if(getLength(su_form.B_TITLE.value) > 300){			alert("<%=BOARD_LI_ITEM_NM_ARR[0] %>의 입력내용이 너무 깁니다");			su_form.B_TITLE.focus();			return ;				}		//작성자		if (isEmpty(su_form.REG_NAME.value)){			alert("<%=BOARD_LI_ITEM_NM_ARR[1] %>를 입력해주십시오");			su_form.REG_NAME.focus();			return;		}				if(getLength(su_form.REG_NAME.value) > 50){			alert("<%=BOARD_LI_ITEM_NM_ARR[1] %>의 입력내용이 너무 깁니다");			su_form.REG_NAME.focus();			return ;				}				// 등록일은 체크하지 않는다		<%--		if(!isEmpty(su_form.REG_DT.value)){			if(getLength(su_form.REG_DT.value) > 10 ){				lenalert("<%=BOARD_LI_ITEM_NM_ARR[3] %>", 10, 3);				su_form.REG_DT.focus();				return false;			}						if(!isValidDate(StrreplaceAll(su_form.REG_DT.value, "-",""))){				alert("<%=BOARD_LI_ITEM_NM_ARR[3] %>이 유효한 날짜가 아닙니다");				su_form.REG_DT.focus();				return false;			}		} --%>			    <%	    // 게시판 유형이 일정형인경우 일자를 체크한다	    if(BOARD_TY.equals("000051")){	    %>		if (isEmpty($("#B_SDATE").val())){			alert("일정 시작일을 입력해주십시오");			$("#B_SDATE").focus();			return;		}				if (isEmpty($("#B_EDATE").val())){			alert("일정 종료일을 입력해주십시오");			$("#B_EDATE").focus();			return;		}						if(parseInt(StrreplaceAll($("#B_SDATE").val(),"-",""),10) 				> parseInt(StrreplaceAll($("#B_EDATE").val(),"-",""),10)){			alert("일정은 시작일이 종료일보다 나중일수 없습니다.");			return;		}		<%		}		%>			    <%		// 추가컬럼의 출력여부를 확인하여 출력한다		for(i=0;i<=9;i++){				if(BOARD_ETC_ITEM_ARR[i].equals("Y")){		      // 문자		      if(BOARD_ETC_ITEM_TY_ARR[i].equals("V")){		      %>				if(!isEmpty(su_form.<%="B_ETC"+(i) %>.value)){					if(getLength(su_form.<%="B_ETC"+(i) %>.value) > 200 ){						lenalert("<%=BOARD_ETC_ITEM_NM_ARR[i] %>", 200, 1);						su_form.<%="B_ETC"+(i) %>.focus();						return false;					}				}		      <%		      // 숫자형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("N")){		      %>				if(!isEmpty(su_form.<%="B_ETC"+(i) %>.value)){					if(getLength(su_form.<%="B_ETC"+(i) %>.value) > 20 ){						lenalert("<%=BOARD_ETC_ITEM_NM_ARR[i] %>", 20, 2);						su_form.<%="B_ETC"+(i) %>.focus();						return false;					}				}		      <%		      // 날짜형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("D")){		      %>		      if(!isEmpty(su_form.<%="B_ETC"+(i) %>.value)){					if(getLength(su_form.<%="B_ETC"+(i) %>.value) > 10 ){						lenalert("<%=BOARD_ETC_ITEM_NM_ARR[i] %>", 10, 3);						su_form.<%="B_ETC"+(i) %>.focus();						return false;					}										if(!isValidDate(StrreplaceAll(su_form.<%="B_ETC"+(i) %>.value, "-",""))){						alert("<%=BOARD_ETC_ITEM_NM_ARR[i] %>이 유효한 날짜가 아닙니다");						su_form.<%="B_ETC"+(i) %>.focus();						return false;					}				}		      <%		      // 코드형		      }else if(BOARD_ETC_ITEM_TY_ARR[i].equals("C")){		      %>		      if(isEmpty(su_form.<%="B_ETC"+(i) %>.value)){					alert("<%=BOARD_ETC_ITEM_NM_ARR[i] %>을 선택하셔야 합니다.");					su_form.<%="B_ETC"+(i) %>.focus();					return false;							  }		      <%		      }		   }		}		%>				// textarea에 값 삽입		if(isEmpty(su_form.<%=editor_form_content%>.value)){		   alert('내용을 입력해주세요');		   return;		}		//첨부파일 10개까지 체크		if($.fn.cmfile.getfilelistcnt("cmfile1")>10){			alert("파일은 10개까지 등록 할 수 있습니다");			return;		}						<%		// 갤러리형인경우 대표이미지로 이미지타입만 올릴수있도록한다		if(BOARD_TY.equals("000013")){		%>			if(isEmpty(su_form.REG_PHOTO_ALT.value)){			alert("이미지 설명을 입력해 주세요");			su_form.REG_PHOTO_ALT.focus();			return;		}else{			if(getLength(su_form.REG_PHOTO_ALT.value) > 300){				alert("이미지 설명의 입력내용이 너무 깁니다");				su_form.REG_PHOTO_ALT.focus();				return ;					}								}					// 첨부파일이 입력되어 있는지 확인한다		if($.fn.cmfile.getfilelistcnt("cmfile1")==0){			alert("파일이 1개이상 등록되어야 합니다");			return;		}				<%		}		%>				<%		// 동영상형인경우 대표이미지로 이미지타입만 올릴수있도록한다		if(BOARD_TY.equals("000053")){		%>			      			// 동영상 업로드 파일또는 동영상 url이 입력되어야만 한다			if(isEmpty(su_form.B_ETC0.value) &&  $.fn.cmfile.getfilelistcnt("cmfile1")==0){				alert("동영상 URL 또는 업로드할 동영상이 둘중에 하나는 입력되어야합니다.");				su_form.B_ETC0.focus();				return;			}			if(!isEmpty(su_form.REG_PHOTO_ALT.value)){				if(getLength(su_form.REG_PHOTO_ALT.value) > 300){					alert("이미지 설명의 입력내용이 너무 깁니다");					su_form.REG_PHOTO_ALT.focus();					return ;						}				//if($.fn.cmfile.getfilelistcnt("cmfile2")==0){						}			if($("#cmfile2_FILE1").val()!=""){					if(isEmpty(su_form.REG_PHOTO_ALT.value)){					alert("이미지가 등록된경우 이미지설명이 입력되어야합니다.");					su_form.REG_PHOTO_ALT.focus();					return ;									}			}							<%		}		%>				<%		// 비로그인게시판의과 답변형 게시판의 경우 비밀번호가 필수이다		if(BOARD_TY.equals("000417") || BOARD_TY.equals("000012")){		%>			if(isEmpty(su_form.DATA_IPNS.value)){			alert("비밀번호를 입력해 주세요");			su_form.DATA_IPNS.focus();			return;		}else{			if(getLength(su_form.DATA_IPNS.value) > 20){				alert("비밀번호의 입력내용이 너무 깁니다");				su_form.DATA_IPNS.focus();				return;					}									// 비밀번호가 입력되어있을경우 비밀번호를 체크한다			if(!isEmpty($('input[name=DATA_IPNS]').val()) ){				if($('input[name=DATA_IPNS]').val().length < 9 || $('input[name=DATA_IPNS]').val().length > 20){					alert("비밀번호는 영문,숫자,특수문자 조합으로 9~20자리로 사용해야합니다.");					$('input[name=DATA_IPNS]').focus();					return;				}								if(!$('input[name=DATA_IPNS]').val().match(/([a-zA-Z0-9].*[!,@,#,$,%,^,&,*,?,_,~,(,),+])|([!,@,#,$,%,^,&,*,?,_,~,(,),+].*[a-zA-Z0-9])/)){					alert("비밀번호는 영문,숫자,특수문자 조합으로 9~20자리로 사용해야합니다.");					$('input[name=DATA_IPNS]').focus();					return;				}							}						/*if ($("#DATA_IPNS").val().length < 4) {				alert("비밀번호는 숫자4자리로 입력해 주시기 바랍니다.");				$("#DATA_IPNS").focus();				return;			}*/					}					<%		}		%>					//alert("11");	  //su_form.target = "successIframe";	    <%		if(pstate.equals("UF")){		%>		su_form.pstate.value='U';			    <%		}else if(pstate.equals("CF")){		%>  			  	su_form.pstate.value='C';	    <%		}		%> 	  	  su_form.action='<c:url value="/cmsmain.do" />';	  su_form.submit();	  su_form.target = "";	}	function Go_list(){		  su_form=document.writefrm;		  su_form.method='post';		  su_form.B_CONTENTS.value='';		  su_form.pstate.value='L';		  su_form.action='<%=RequestURL%>';		  su_form.submit();		  su_form.target = "";			}	    	function chgGESI_FL(){		if(document.getElementsByName("GESI_FL")[0].value=="P"){			document.getElementsByName("DATA_IPNS")[0].value = "";			document.getElementsByName("DATA_IPNS")[0].style.backgroundColor="#ffffff";			document.getElementsByName("DATA_IPNS")[0].readOnly = false;			$('input[name=DATA_IPNS]').parent('td').prev('th').addClass('essential');					}else{			document.getElementsByName("DATA_IPNS")[0].value = "";			document.getElementsByName("DATA_IPNS")[0].style.backgroundColor="#cccccc";			document.getElementsByName("DATA_IPNS")[0].readOnly = true;			$('input[name=DATA_IPNS]').parent('td').prev('th').removeClass('essential');					}	}    //=== 영문, 숫자 혼용 확인    // 혼용이면 true, 아니면 false    function engnum_mix_chk(str)    {    	var chk_num = str.search(/[0-9]/g);    	var chk_eng = str.search(/[a-z]/ig);    	if(chk_num < 0 || chk_eng < 0)    	{    		return false;    	}    	return true;    }			    function onlyEng(objtext1) {	    var inText = objtext1.value;	    var ret;		    for (var i = 0; i < inText.length; i++) {	       ret = inText.charCodeAt(i);	      if ((ret > 122) || (ret < 48) || (ret > 57 && ret < 65) || (ret > 90 && ret < 97)) {	         alert("영문자와 숫자만을 입력하세요");	         objtext1.value = "";	         objtext1.focus();	         return false;	      }	    }	    return true;    }/*     function Chg_0000000012SEL_DIVS1(obj){    	var v = obj.value;    	var email2_2 = document.getElementById("REG_MAIL2");    	email2_2 = (obj.value=='0000000024'? email2_2.style.display='' : email2_2.style.display='none');     }			    function Set_0000000012(){    	sel_cnt = 0;    	//alert(sel_cnt);    	if(sel_cnt == 0){    		selOrign("dto_SELMENU1_0","000024");    		Chg_0000000012SEL_DIVS1(document.getElementsByName("dto_SELMENU1_0")[0]);    	}    } */    	function containsChars(obj, chars){				for(var inx=0; inx < obj.value.length; inx++){			if(chars.indexOf(obj.value.charAt(inx)) != -1)return false;		}		return true;	}  	// 첨부파일정보를 셋팅한다<%-- function Set_Files(){	<%	if(getABDFiles!=null){		for(j=0;j<getABDFiles.size();j++){			rtn_row_map2  = (Map)getABDFiles.get(j);			//IDX, M_CODE, RIDX, FILE_NM, RFILE_NM , ORDER_NO,			if(!((String)rtn_row_map2.get("fileNm")).equals("")){	%>	$('select[id=B_FILE_LIST]').append("<option value=\"<%=rtn_row_map2.get("idx")%>\"><%=rtn_row_map2.get("fileNm")%></option>");	<%			}		}	}	%>	} --%>///////////////////////////////////////////// 첨부파일관련 /////////////////////////////////////////////////		$(document).ready(function() {		// 화면이 로드될경우 초기셋팅값을 보여준다		//Set_0000000012();				//달력셋팅	    $("input[dateinp='Y']").datepicker({	        changeMonth: true, 	        changeYear: true,	        monthNames: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'],	        showOn:'both',	        buttonImage:'/images/contents/cal.png',	        onClose:function(selectedDate){	        		        }	    });					<%			// 첨부기능이 활성화된경우만			if(!(HtmlTag.returnString((String)rtn_Map.get("file_group_htmlarray"),"")).equals("")){		%>						var file_group1 = <%=(String)rtn_Map.get("file_group_htmlarray")%>;			$.fn.cmfile.setfileList("cmfile1", file_group1);		<%			}			if(!(HtmlTag.returnString((String)rtn_Map.get("file_group_htmlarray2"),"")).equals("")){		%>						var file_group2 = <%=(String)rtn_Map.get("file_group_htmlarray2")%>;			$.fn.cmfile.setfileList("cmfile2", file_group2);		<%			}				    // 게시구분은 답변형인 경우만 사용자화면에서는 입력이 가능하다	    if(BOARD_TY.equals("000012") && pstate.equals("UF")){	   		if(rGESI_FL.equals("Y")){	    %>	    	$('#GESI_FL1').prop('checked', false);	   	 	$('#GESI_FL2').prop('checked', true);		<%	   		}	    }else if(BOARD_TY.equals("000012") && pstate.equals("CF")){	    %>    	<%    		if(SITE_SESSION!=null){    			// 로그인하고 글쓰기하는경우    			if(!userNm.equals("N")){    	%>    				$("#REG_NM_STR").prepend("<%=userNm%>");    				$("#REG_NAME").val("<%=userNm%>");    	<%    			// 로그인이 해제된경우    			}else{    	%>				<c:if test="${R_MAP.param.SITE_AUTH_SESSION == null}">					alert("본인인증이 해제 되었습니다.");					Go_list();				</c:if>				<c:if test="${R_MAP.param.SITE_AUTH_SESSION != null}">					<c:if test="${R_MAP.param.SITE_AUTH_SESSION.sName != null}">   						$("#REG_NM_STR").prepend("<c:out value="${R_MAP.param.SITE_AUTH_SESSION.sName}" />");						$("#REG_NAME").val("<c:out value="${R_MAP.param.SITE_AUTH_SESSION.sName}" />");    				</c:if>    			</c:if>				<c:if test="${R_MAP.param.SITE_AUTH_SESSION.sName == null}">					alert("본인인증이 해제 되었습니다.");					Go_list();				</c:if>    				    <%    			}    		}else{    	%>			<c:if test="${R_MAP.param.SITE_AUTH_SESSION == null}">				alert("본인인증이 해제 되었습니다.");				Go_list();			</c:if>			<c:if test="${R_MAP.param.SITE_AUTH_SESSION != null}">				<c:if test="${R_MAP.param.SITE_AUTH_SESSION.sName != null}">					$("#REG_NM_STR").prepend("<c:out value="${R_MAP.param.SITE_AUTH_SESSION.sName}" />");					$("#REG_NAME").val("<c:out value="${R_MAP.param.SITE_AUTH_SESSION.sName}" />");				</c:if>				<c:if test="${R_MAP.param.SITE_AUTH_SESSION.sName == null}">					alert("본인인증이 해제 되었습니다.");					Go_list();				</c:if>			</c:if>    	    	<%    		}	    }	    %>	    	});			//]]></script>