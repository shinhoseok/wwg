<%--/*=================================================================================*//* 시스템            : JRCMS 시스템 SYSTEM/* 프로그램 아이디   : /WEB-INF/jsp/ji/cm/abd/jicm_abd_010_s1.jsp /* 프로그램 이름     : jicm_abd_010_s1    /* 소스파일 이름     : jicm_abd_010_s1.jsp/* 설명              : SYSTEM 게시판관리 목록페이지/* 버전              : 1.0.0/* 최초 작성자       : 이금용/* 최초 작성일자     : 2016-11-16/* 최근 수정자       : 이금용/* 최근 수정일시     : 2016-11-16/* 최종 수정내용     : 최초작성/*=================================================================================*/--%><%@page pageEncoding="utf-8"%><%Map rtn_page_List = new HashMap();List rtn_tmp_List = new ArrayList();List code_select_List = new ArrayList(); // 셀렉트박스 생성용 코드리스트Map rtn_row_map2 = new HashMap();rtn_page_List = (Map)rtn_Map.get("PageListABD"); // 조회된 페이지 리스트rtn_tmp_List = (List)rtn_page_List.get("setList"); // 조회된 페이지 리스트String ssidx = (String)rtn_Map.get("sidx");//회원사 기본정보(회원사 공지형게시판일 경우만 조회)String comp_gnam = "";/*if(scode.equals("S02") && BOARD_TY.equals("000010")){	Map getV_AME_INFO = new HashMap();	rtn_tmp_Map = (Map)rtn_Map.get("getV_AME_INFO");	getV_AME_INFO = (Map)rtn_tmp_Map.get("getV_AME_INFO");	comp_gnam = (String)getV_AME_INFO.get("comp_gnam");	//회원사구분명}*/String tail_gbn = "";int arti_No = 0;//가상순번int j = 0;int k = 0;int list_title_cnt =1;int etc_chk_cnt = 0;int TotalCount = Integer.parseInt(String.valueOf(rtn_page_List.get("setTotalCount")),10);int TotalPageCount = Integer.parseInt(String.valueOf(rtn_page_List.get("setTotalPageCount")),10);%><script language="javascript" src="<%=con_root%>/js/com-file.js"></script><form name="listfrm" id="listfrm" method="post" onSubmit='return false;srchCheck();' ><!-- 조회된등록수: <%=rtn_page_List.get("setTotalCount")%> 건<br />--><input type="hidden" name="scode" value="<%=scode%>" id="scode" title="사이트코드" /><input type="hidden" name="pcode" value="<%=pcode%>" id="pcode" title="페이지코드"  /><input type="hidden" name="pstate" value="<%=pstate%>" id="pstate" title="페이지상태"  /><input type="hidden" name="curr_page" value="<%=curr_page%>" id="curr_page"  title="현재페이지번호"  /><input type="hidden" name="show_rows" value="<%=show_rows%>" id="show_rows"  title="현재페이지당데이터수"  /><input type="hidden" name="totalpage" value="" id="totalpage"  title="전체페이지수"  /><input type="hidden" name="sidx" id="sidx" value=""><input type="hidden" name="ichk_secret_no" id="ichk_secret_no" value=""><input type="hidden" name="mylist_yn" id="mylist_yn" value="<%=mylist_yn%>">					<!-- 검색 -->                    <div class="inputArea">                        <div class="areaInner">                            <legend><%=M_PATH_STR.substring(M_PATH_STR.lastIndexOf("::")+2)%> 검색</legend>							<select class="select_type01" name="se_field" id="se_field" title="검색조건 선택">					        	<option value="" <%if(se_field.equals("")){ %>selected="selected"<%} %> id="sc_all">==전체==</option>					    		<option value="B_TITLE" <%if(se_field.equals("B_TITLE")){ %>selected="selected"<%} %> id="sc_title">제목</option>					            <option value="B_CONTENTS" <%if(se_field.equals("B_CONTENTS")){ %>selected="selected"<%} %> id="sc_writer">내용</option>					            <%if(BOARD_TY.equals("000011") || BOARD_TY.equals("000012")){ %>					            <option value="REG_NAME" <%if(se_field.equals("REG_NAME")){ %>selected="selected"<%} %> id="sc_reg_name">작성자</option>					            <%} %>							</select>                            							<input type="text" id="se_text" maxlength="50" name="se_text" value="<%=se_text %>" Onkeypress="srchCheck()" onKeyUp="sechnotin();" title="검색어 입력"  placeholder="검색어를 입력하세요" />                            <a class="blueBtn" href="#" id="btn_search">검색</a>                            <%if(BOARD_TY.equals("000223")){ // 지원사업공고 게시판에는 로그인한사용자 본인의 지원목록을 조회할수 있는 버튼을 추가한다%>                            <a href="#" class="blueBtn" id="btn_mylist_go" onclick='return false;'>내지원신청목록</a>                            <%} %>                        </div>                    </div>                    <!-- 검색 -->                    <div class="total" id="page_info_id">                        Total:                        <span>0</span>건                        (<span>0</span> / 0)                                            </div>                    <div class="tableArea info_list">                        <table class="tableA">                        	<c:choose>                        		<c:when test="${pcode eq '000115'}"> <!-- 공지사항 -->                        			<caption><%=M_PATH_STR.substring(M_PATH_STR.lastIndexOf("::")+2)%> 목록-번호,제목,첨부파일,작성일,조회수</caption>                        		</c:when>                        		<c:otherwise>                        			<caption><%=M_PATH_STR.substring(M_PATH_STR.lastIndexOf("::")+2)%> 목록-제목,작성자,작성일</caption>                        		</c:otherwise>                        	</c:choose>                            <colgroup>							<% 							// faq형에는 no를 출력하지 않는다							if(!BOARD_TY.equals("000052")){							%>							<col width="9%" />							<%							}							%>														<% if(BOARD_LI_ITEM_ARR[0].equals("B_TITLE")){								//제목								list_title_cnt++;							%>							<col width="*" />							<% }							if(BOARD_OPT_ARR[3].equals("Y")){								//첨부								list_title_cnt++;							%>							<col width="12%" />							<% }							//자유게시판과 Q&A만 작성자를 보여준다. 자유형:000011 답변형:000012							if(BOARD_TY.equals("000011")||BOARD_TY.equals("000012")){														if(BOARD_LI_ITEM_ARR[1].equals("REG_NAME")){								//작성자								list_title_cnt++;							%>							<col width="<%=(scode.equals("S01")?"10":"15")%>%" class="resp_1000" />							<% 	}							  }							if(BOARD_LI_ITEM_ARR[3].equals("REG_DT")){								//작성일								list_title_cnt++;							%>							<col width="<%=(scode.equals("S01")?"14":"15")%>%" />							<% }							if(BOARD_LI_ITEM_ARR[2].equals("READ_CNT")){								//조회수								list_title_cnt++;							%>							<col width="<%=(scode.equals("S01")?"10":"15")%>%" class="resp_1000" />							<% } 							if(BOARD_TY.equals("000012") ){								//진행상태는 공지형,자유형 과 갤러리형은 제외된다 통합형은 답변형통합형이 아닌경우에만 제외된다								list_title_cnt++;							%>							<col width="10%" />						    <% }  							// 추가컬럼의 출력여부를 확인하여 출력한다							for(i=4;i<=13;i++){									if(BOARD_LI_ITEM_ARR[i].equals("ETC"+(i-4)) && BOARD_ETC_ITEM_ARR[(i-4)].equals("Y")){									list_title_cnt++;							%>								<col width="10%" />							<%								}							}							%>                            </colgroup>                            <thead>								<tr id="list_th_obj">									<% 									// faq형에는 no를 출력하지 않는다									if(!BOARD_TY.equals("000052")){									%>									<th scope="col" class="resp">번호</th>									<%									}									%>															    								    <% if(BOARD_LI_ITEM_ARR[0].equals("B_TITLE")){//제목 %>								    <th scope="col"><%=BOARD_LI_ITEM_NM_ARR[0] %></th>								    <% } 								    if(BOARD_OPT_ARR[3].equals("Y")){//첨부 %>								    <th scope="col" class="resp">첨부파일</th>								    <% } 								    									//자유게시판과 Q&A만 작성자를 보여준다. 자유형:000011 답변형:000012									if(BOARD_TY.equals("000011")||BOARD_TY.equals("000012")){								    								    if(BOARD_LI_ITEM_ARR[1].equals("REG_NAME")){//작성자 %>								    <th scope="col" class="resp_1000"><%=BOARD_LI_ITEM_NM_ARR[1] %></th>								    <%   }								      } 								    if(BOARD_LI_ITEM_ARR[3].equals("REG_DT")){//작성일 %>								    <th scope="col"><%=BOARD_LI_ITEM_NM_ARR[3] %></th>								    <% } 								    if(BOARD_LI_ITEM_ARR[2].equals("READ_CNT")){//조회수 %>								    <th scope="col" class="resp_1000"><%=BOARD_LI_ITEM_NM_ARR[2] %></th>								    <% }   								    //진행상태는 공지형,자유형과 갤러리형, 통합형은 제외된다 								    if(BOARD_TY.equals("000012") ){								    %>								    <th scope="col">진행상태</th>								    <% }  									// 추가컬럼의 출력여부를 확인하여 출력한다									for(i=4;i<=13;i++){											if(BOARD_LI_ITEM_ARR[i].equals("ETC"+(i-4)) && BOARD_ETC_ITEM_ARR[(i-4)].equals("Y")){									%>										<th scope="col" class="resp"><%=BOARD_LI_ITEM_NM_ARR[(i)] %></th>									<%										}									}									%>																								</tr>                            </thead>                            <tbody id="list_data_obj">                             </tbody>                        </table>                    </div>                    <div class="pagingArea">                    </div>                    <div class="btnArea"> 			<%			// 게시판 종류가 자유형일경우 등록버튼을 보여준다			// 게시판 종류는 000010:공지형 , 000011:자유형 , 000012:답변형, 000013:갤러리형 , 000014:통합형, 000051:일정형, 000052:FAQ형, 000052:동영상형			// 000417:비로그인형			if(BOARD_TY.equals("000011") || BOARD_TY.equals("000012") || BOARD_TY.equals("000417")){			%>						<c:if test="${nUser == 'N'}">							<a href="#" class="blueBtn" id="btn_reg_gologin" onclick='return false;'>로그인후글쓰기</a>							<a href="#" class="blueBtn" id="btn_reg_goagree" onclick='return false;'>본인인증후글쓰기</a>						</c:if>						<c:if test="${nUser != 'N' && nUser != ''}">							<a href="#" class="blueBtn" id="btn_reg_login" onclick='return false;'>글쓰기</a>						</c:if>													<!-- <a href="#" class="btnBL" onclick='reset_list();return false;'>목록</a> -->				<%}else{%>				<!--<a href="#" class="btnBL" onclick='reset_list();return false;'>목록</a>-->			<%}%>                                           </div>											<%				//페이징 관련 변수설정				String formname = "document.listfrm";		// from 이름 ;; document.form[0];				String action = RequestURL; 				// action				String formele = "curr_page";				String pagestr = CM_Util.PageindexS(TotalCount,curr_page,TotalPageCount,curr_page,formname,action,formele,img_url+"/cmsadmin");			%>				</form>	     	<!--목록시작--><script type="text/javascript">var searchYn = false;$(function(){	refreshAbd();});function Go_Caution(){	  alert("비공개글은 본인만 열람할수 있습니다.");	  return;}//TODO : refreshAbdfunction refreshAbd(){	//검색어가 있을시 목록보기 버튼을 보여준다 2018.07.21	if($('#se_text').val()==''){		$('.button>.btn_2').hide();	}else{		$('.button>.btn_2').show();	}		if (getLength($("#se_text").val()) > 50) {		alert("\n검색어는 한글 25자 이상을 입력할수 없습니다.");		$("#se_text").val("");		$("#se_text").focus();  		return false;	}					if (char_chk($("#se_text").val(),"'") == false) {		alert("\n검색어는 '을 포함할 수 없습니다.");		$("#se_text").val("");		$("#se_text").focus(); 		return false;	}		$("#pstate").val("X");	var params =  $("form[name=listfrm]").serialize();	$("#list_data_obj").html("");	CmopenLoading();	 $.ajax({        type: "post",        url: "<c:url value='/cmsajax.do'/>",        data: params,        async: false,        dataType:"json",        timeout: 3000,        error: function (jqXHR, textStatus, errorThrown) {            // 통신에 에러가 있을경우 처리할 내용(생략가능)	        	alert("네트웍장애가 발생했습니다. 다시시도해주세요");	        	CmcloseLoading();                  },			                     success: function(data){           if(data.result==true){				if(data.rows!=""){ 					$("#page_info_id").html("Total: <span>"+data.records+"</span>건 (<span>"+data.page+"</span> / "+data.total+")");					AbdListToHtml(data);				}else{					$(".paging").html(PageindexS("0",$("#show_rows").val(),"0",$("#curr_page").val(),"document.listfrm","<%=RequestURL%>","curr_page","<%=img_url%>/cmsadmin"));					$("#page_info_id").html("Total: <span>0</span>건 (<span>0</span> / 0");					$("#list_data_obj").append("<tr><td colspan='"+$("#list_th_obj").children().length+"' class='no_text'>조회된 데이터가 없습니다.</td></tr>");				}                      }else{	        	alert(data.TRS_MSG);	        	top.location.href="<%=RequestURL%>";	        	           }			          	$("#pstate").val("L");          	CmcloseLoading();        }	});	}//TODO : AbdListToHtmlfunction AbdListToHtml(res_data){	var hi=0;	var hj=0;	var list_html = "";	var desc_html = "";	var arti_No = 0;	var rows = res_data.rows;	for(hi=0;hi<rows.length;hi++){		<%		// faq 게시판 인경우		if(BOARD_TY.equals("000052")){		%>					// 답글인경우 보여주지 않는다			if(rows[hi].data_depth > 1){				list_html = "<tr style='display:none' id='answer_"+rows[hi].data_origin_no+"'>";			}else{				list_html = "<tr>";			}		<%		}else{		%>		if(rows[hi].open_yn =="P"){			list_html = "<tr class='secret'>";		}else{			list_html = "<tr>";		}				<%		}		%>						arti_No=  parseInt(res_data.records,10) - parseInt($("#show_rows").val(),10)*(parseInt(res_data.page,10)-1)-hi;		//console.log("res_data.record:"+res_data.records+":res_data.page:"+res_data.page+":$(#show_rows).val():"+$("#show_rows").val()+":hi:"+hi);		<% 		// faq형에는 no를 출력하지 않는다		if(!BOARD_TY.equals("000052")){		%>		list_html = list_html+"<td class=\"resp\">"+(arti_No)+"</td>";		<%		}		  	if(BOARD_LI_ITEM_ARR[0].equals("B_TITLE")){//제목 %>  		  		if(rows[hi].data_depth > 1){					<%					// faq 게시판 인경우					if(BOARD_TY.equals("000052")){					%>		  						  		list_html = list_html+"<td class=\"subject\" colspan='"+$("#list_th_obj").children().length+"' class=\"faq_answer\">";					<%					}else{					%>							list_html = list_html+"<td class=\"subject\" id=\"b_title_dot\" >";					<%					}					%>							  		}else{		  			list_html = list_html+"<td class=\"subject\" id=\"b_title_dot\" >";		  		}		      <%		  	  // 게시판 종류는 000010:공지형 , 000011:자유형 , 000012:답변형, 000013:갤러리형 , 000014:통합형		      // 게시판 종류가 통합형일경우 메뉴명을 보여준다		      if(BOARD_TY.equals("000014")){			  %>					list_html = list_html+"<strong>["+rows[hi].menu_nm+"]</strong>";		      <%   		  		      }		      %>		      		      if(rows[hi].gesi_fl =="T"){		    	  list_html = list_html+"<strong>[공지]</strong>";		      }else if(rows[hi].gesi_fl =="N"){		    	  list_html = list_html+"<strong>[숨김]</strong> ";		      }else if(rows[hi].gesi_fl =="P"){		    	  list_html = list_html+"<strong>[비공개]</strong>";		      }              		      if(parseInt(rows[hi].r_depth,10) > 1 ){		    	  for(k=1;k<parseInt(rows[hi].r_depth,10);k++){		    		  list_html = list_html+"&nbsp;&nbsp;";		    	  }		    	  list_html = list_html+"<img src=\"<%=img_url %>/cm/icon_reply.gif\" alt=\"답변\" />";		      		      }		      <%			  // 답변형은 비공개글은 작성자만 열람가능하다			  if( BOARD_TY.equals("000012")){		      %>		      	if("<%=(String)SITE_SESSION.get("USER_ID")%>"== rows[hi].reg_id){		      		if(rows[hi].open_yn =="Y"){		      			list_html = list_html+"<a href=\"#\" onclick=\"Go_View('"+rows[hi].menu_cd+"',"+rows[hi].data_seqno+",'"+rows[hi].open_yn+"','"+rows[hi].auth_type+"');return false;\">";		      		}else{		      			list_html = list_html+"<a href=\"#\" class=\"lock\" onclick=\"Go_View('"+rows[hi].menu_cd+"',"+rows[hi].data_seqno+",'"+rows[hi].open_yn+"','"+rows[hi].auth_type+"');return false;\">";		      		}		      	}else{		      		if(rows[hi].open_yn =="Y"){		      			list_html = list_html+"<a href=\"#\"   onclick=\"Go_View('"+rows[hi].menu_cd+"',"+rows[hi].data_seqno+",'"+rows[hi].open_yn+"','"+rows[hi].auth_type+"');return false;\">";		      		}else{						list_html = list_html+"<a href=\"#\" class=\"lock\" onclick=\"Go_View('"+rows[hi].menu_cd+"',"+rows[hi].data_seqno+",'"+rows[hi].open_yn+"','"+rows[hi].auth_type+"');return false;\">";								      		}		      				      	}		      			      	//list_html = list_html+" "+rows[hi].reg_id		      <%			  }else{		      %>		      	list_html = list_html+"<a href=\"#\" onclick=\"Go_View('"+rows[hi].menu_cd+"',"+rows[hi].data_seqno+");return false;\">";		      <%			  }		      %>				<%				// faq 게시판 인경우				if(BOARD_TY.equals("000052")){				%>					if(rows[hi].data_depth > 1){						list_html = list_html+"<img src='<%=img_url%>/cm/faq_a.png' alt='answer' style='vertical-align:middle;' />&nbsp;&nbsp;";						list_html = list_html+"<span style='left: 30px;margin-left:0px;margin-top:5px;text-align:left'>"+rows[hi].data_desc.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;amp;/gi,"&");						list_html = list_html+"</span>";											}else{						list_html = list_html+"<img class='faqSt' src='<%=img_url%>/cm/faq_q.png' alt='question' style='vertical-align:middle;' id='question_img_"+rows[hi].data_origin_no+"' />&nbsp;&nbsp;";					}									<%				}				%>			  <%if(BOARD_TY.equals("000052")){ //FAQ형인 경우 제목을 전체출력 %>		      	list_html = list_html+"<span class='faqSt'>"+cutStr(rows[hi].data_title.replace(/&amp;amp;/gi,"&"),300)+"</span></a>";		      <%}else{%>		      	list_html = list_html+""+cutStr(rows[hi].data_title.replace(/&amp;amp;/gi,"&"),67);		      				      <%			      // 자유형의 경우 댓글숫자를 보여준다			      if(BOARD_TY.equals("000011")){			      %>			      //list_html = list_html+"&nbsp;&nbsp;["+rows[hi].rpy_cnt+"]";			      <%			      }else if(BOARD_TY.equals("000223")){			      %>// 			      list_html = list_html+"&nbsp;&nbsp;[신청:"+rows[hi].rpy_cnt+"건]"; shin remove				  list_html = list_html;			      <%			      }			      %>			      			      list_html = list_html+"</a>"	     		  // 현재일자와 등록일자 차이가 14일 이내이면 new이미지를 보여준다		      	  if(parseInt(StrreplaceAll("<%=curDate%>","-",""),10) < parseInt(getadddate(StrreplaceAll(rows[hi].reg_dt,"-",""),"+", 7),10)){		    	  	  list_html = list_html+"<span class='icon_new'>새글</span>";			      	  }	     		  if(rows[hi].open_yn=="N"){		      		list_html = list_html+"<span class='secret' style='display:inline-block; margin-left:5px; width:16px; height:16px; background:url(/images/common/icon_secret_03.png) 50% 50% no-repeat; text-indent:-99999px; position:relative; top:5px; border-radius:50%;'>비공개</span>";		      	  }			      		      <%}%>		      		      list_html = list_html+"</td>";			  <% 		  }		  			// faq 게시판 인경우			if(BOARD_TY.equals("000052")){			%>			// 답변글은 세부항목을 안보인다			if(rows[hi].data_depth > 1){							}else{			<%			  if(BOARD_OPT_ARR[3].equals("Y")){//첨부				  %>      					  list_html = list_html+"<td class=\"resp add\">";			      	if(rows[hi].file_nms!="" && rows[hi].file_nms!=null){				      var file_nms_arr = rows[hi].file_nms.split("::");				      var file_seq_arr = rows[hi].file_seq.split("::");				      var fext = "";  // 파일 확장자				      if(file_nms_arr != null){				    	  for(j=0;j<file_nms_arr.length;j++){					    		  if(file_nms_arr[j]!=""){				    			  fext = file_nms_arr[j].substring(file_nms_arr[j].lastIndexOf(".")+1).toLowerCase();				    	<%				    			  // 답변형은 작성자와 로그인한사람의 아이디가 일치하면 링크를연결하고				    			  if(BOARD_TY.equals("000012")){			  				    	%>							      	if("<%=(String)SITE_SESSION.get("USER_ID")%>"==rows[hi].reg_id){							      		//shin update1							      		list_html = list_html+"<a href=\"#\" class=\"attach\" onclick=\"GoDownfile('"+file_seq_arr[j]+"');return false;\" title="+file_nms_arr[j]+"파일다운로드>";// 							      		list_html = list_html+"<span class=\"attach\" title="+file_nms_arr[j]+"파일다운로드>";							      	}else{							      		list_html = list_html+"<a href=\"#\" class=\"attach\" onclick=\"Go_Caution();return false;\">";// 							      		list_html = list_html+"<span class=\"attach\">";							      	}				      	<%					  			  }else{				        %>				        				list_html = list_html+"<a href=\"#\" class=\"attach\" onclick=\"GoDownfile('"+file_seq_arr[j]+"');return false;\" title="+file_nms_arr[j]+"파일다운로드>";// 										list_html = list_html+"<span class=\"attach\" title="+file_nms_arr[j]+"파일다운로드>";				      	<%					  			  }				        %>// 				    			  list_html = list_html+"첨부파일</a>";				        		  list_html = list_html+"첨부파일</spane>";				    		  }				    	  }// for 문 종료				      }			      }			      	list_html = list_html+"</td>";				  <% 				  } // 첨부 끝								  ///////////////////////////////////////////////  아래가 문제임				  if(BOARD_LI_ITEM_ARR[1].equals("REG_NAME")){//작성자						 out.println("	  list_html = list_html+\"<td class=\\\"resp_1000\\\">\"+rows[hi].reg_id_nm+\"</td>\";");				  }				  				  if(BOARD_LI_ITEM_ARR[3].equals("REG_DT")){				  //작성일				  	out.println("	  list_html = list_html+\"<td class=\\\"date\\\">\"+rows[hi].reg_dt+\"</td>\";");   				  }				  				  if(BOARD_LI_ITEM_ARR[2].equals("READ_CNT")){				  //조회수				  	out.println("	  list_html = list_html+\"<td class=\\\"resp_1000\\\">\"+rows[hi].inq_cnt+\"</td>\";");   				  } 				 //진행상태는 답변형만				  if(BOARD_TY.equals("000012")){					  out.println("	  list_html = list_html+\"<td>\";");   					  out.println("   if(parseInt(rows[hi].rpy_cnt,10) > 0){");   					  out.println("   	list_html = list_html+\"<span class=\\\"stk_2\\\">답변완료</span>\";");					  out.println("   }else{");					  out.println("   	list_html = list_html+\"<span class=\\\"stk_1\\\">미답변</span>\";"); 	  					  out.println("   }");				  	  out.println("   list_html = list_html+\"</td>\";"); 				  }  				  // 추가컬럼의 출력여부를 확인하여 출력한다				  for(j=4;j<=13;j++){							if(BOARD_LI_ITEM_ARR[j].equals("ETC"+(j-4)) && BOARD_ETC_ITEM_ARR[(j-4)].equals("Y")){						     // 추가컬럼이 코드형일경우 					     	if(BOARD_ETC_ITEM_TY_ARR[(j-4)].equals("C")){							      	%>									list_html = list_html+"<td class=\"resp\">&nbsp;</td>";							    <%			      							     	}else{				  %>				  				//console.log("111::"+rows[hi].data_spa_col<%=(j-4)%>);				  				if(rows[hi].data_spa_col<%=(j-4)%>!=undefined && rows[hi].data_spa_col<%=(j-4)%>!=null && rows[hi].data_spa_col<%=(j-4)%>!="null"){				  					list_html = list_html+"<td style=\"text-align:center;\">"+rows[hi].data_spa_col<%=(j-4)%>+"</td>";				  				}else{				  					list_html = list_html+"<td style=\"text-align:center;\"></td>";				  				}				  								  <%					     	}						}				  }				  %>				}				  <%				  				  			// faq형이 아닌경우			}else{			  if(BOARD_OPT_ARR[3].equals("Y")){//첨부			  %>      				  list_html = list_html+"<td class=\"resp add\">";		      	if(rows[hi].file_nms!="" && rows[hi].file_nms!=null){		      	  //console.log("3333333333333333333:"+rows[hi].file_nms);			      var file_nms_arr = rows[hi].file_nms.split("::");			      var file_seq_arr = rows[hi].file_seq.split("::");			      var fext = "";  // 파일 확장자			      // console.log("444444444444444444444");			      if(file_nms_arr != null){			    	  for(j=0;j<file_nms_arr.length;j++){				    		  if(file_nms_arr[j]!=""){			    			  fext = file_nms_arr[j].substring(file_nms_arr[j].lastIndexOf(".")+1).toLowerCase();			    	<%			    			  // 답변형은 작성자와 로그인한사람의 아이디가 일치하면 링크를연결하고			    			  if(BOARD_TY.equals("000012")){			  			    	%>						      	if("<%=(String)SITE_SESSION.get("USER_ID")%>"== rows[hi].reg_id){						      		//shin update// 						      		list_html = list_html+"<a href=\"#\" class=\"attach\" onclick=\"GoDownfile('"+file_seq_arr[j]+"');\" title="+file_nms_arr[j]+"파일다운로드>";						      		list_html = list_html+"<span class=\"attach\" title="+file_nms_arr[j]+"파일다운로드>";						      	}else if(rows[hi].open_yn=="Y"){// 						      		list_html = list_html+"<a href=\"#\" class=\"attach\" onclick=\"GoDownfile('"+file_seq_arr[j]+"');\" title="+file_nms_arr[j]+"파일다운로드>";						      		list_html = list_html+"<span class=\"attach\" title="+file_nms_arr[j]+"파일다운로드>";						      	}else{// 						      		list_html = list_html+"<a href=\"#\" class=\"attach\" onclick=\"Go_Caution();return false;\">";						      		list_html = list_html+"<span class=\"attach\" title="+file_nms_arr[j]+"파일다운로드>";						      	}			    				      	<%				  			  }else{				  							  	%>// 				  				list_html = list_html+"<a href=\"#\" class=\"attach\" onclick=\"GoDownfile('"+file_seq_arr[j]+"');\" title="+file_nms_arr[j]+"파일다운로드>";								list_html = list_html+"<span class=\"attach\" title="+file_nms_arr[j]+"파일다운로드>";				  	<%				  			  }			        %>			        			    			  // 엑셀			    			  if(fext=="xls" || fext=="xlsx"){			    				  list_html = list_html+"엑셀파일";			    			  // pdf			    			  }else if(fext=="pdf"){			    				  list_html = list_html+"pdf파일</span>";			        		  // doc			    			  }else if(fext=="doc" || fext=="docs"){   			    				  list_html = list_html+"워드파일</span>";			            	  // ppt			    			  }else if(fext=="ppt" || fext=="ppts"){ 			    				  list_html = list_html+"ppt파일</span>";			        	      // pdf			    			  }else if(fext=="hwp"){    				  			    				  list_html = list_html+"pdf파일</span>";			      			  // else			    			  }else {    				  			    				  list_html = list_html+"파일";		  		  	  	  	  }							  // 			    			  list_html = list_html+"</a>";			    			  list_html = list_html+"</span>";							  			    		  }			    	  }// for 문 종료			      }		      }		      	list_html = list_html+"</td>";		      				  <%			  } // 첨부 끝			  ///////////////////////////////////////////////  아래가 문제임			  //자유게시판과 Q&A만 작성자를 보여준다. 자유형:000011 답변형:000012			  if(BOARD_TY.equals("000011")||BOARD_TY.equals("000012")){			  			  if(BOARD_LI_ITEM_ARR[1].equals("REG_NAME")){//작성자				out.println("	  list_html = list_html+\"<td class=\\\"resp_1000\\\">\"+masking_name(rows[hi].reg_id_nm)+\"</td>\";");			  } 			  			  }			  			  if(BOARD_LI_ITEM_ARR[3].equals("REG_DT")){			  //작성일			  	out.println("	  list_html = list_html+\"<td class=\\\"date\\\">\"+rows[hi].reg_dt+\"</td>\";");   			  } 			  			  if(BOARD_LI_ITEM_ARR[2].equals("READ_CNT")){			  //조회수			  	out.println("	  list_html = list_html+\"<td class=\\\"resp_1000\\\">\"+rows[hi].inq_cnt+\"</td>\";");   			  } 			 //진행상태는 답변형만			  if(BOARD_TY.equals("000012")){ 				  out.println("	  list_html = list_html+\"<td style=\\\"text-align:center;\\\">\";");   				  out.println("   if(parseInt(rows[hi].rpy_cnt,10) > 0){");   				  out.println("   	list_html = list_html+\"<span class=\\\"stk_2\\\">답변완료</span>\";");				  out.println("   }else{");				  out.println("   	list_html = list_html+\"<span class=\\\"stk_1\\\">미답변</span>\";"); 	  				  out.println("   }");			  	  out.println("   list_html = list_html+\"</td>\";"); 			  }  			  // 추가컬럼의 출력여부를 확인하여 출력한다			  for(j=4;j<=13;j++){						if(BOARD_LI_ITEM_ARR[j].equals("ETC"+(j-4)) && BOARD_ETC_ITEM_ARR[(j-4)].equals("Y")){					     // 추가컬럼이 코드형일경우 				     	if(BOARD_ETC_ITEM_TY_ARR[(j-4)].equals("C")){						      	%>									list_html = list_html+"<td align=\"center\">&nbsp;</td>";						    <%			      						     	}else{			  			%>			  			//console.log("222::"+rows[hi].data_spa_col<%=(j-4)%>);		  				if(rows[hi].data_spa_col<%=(j-4)%>!=undefined && rows[hi].data_spa_col<%=(j-4)%>!=null && rows[hi].data_spa_col<%=(j-4)%>!="null"){		  					list_html = list_html+"<td style=\"text-align:center;\">"+rows[hi].data_spa_col<%=(j-4)%>+"</td>";		  				}else{		  					list_html = list_html+"<td style=\"text-align:center;\"></td>";		  				}			  			<%				     	}					}			  	}			}			%>			  			  list_html = list_html+"</tr>";				<%				// faq 게시판 인경우				if(BOARD_TY.equals("000052")){				%>					list_html = list_html+ "<tr style='display:none' id='answer_"+rows[hi].data_origin_no+"'>";					list_html = list_html+"<td class=\"a_left\" colspan='"+$("#list_th_obj").children().length+"' class=\"faq_answer\">";					list_html = list_html+"<img src='<%=img_url%>/cm/faq_a.png' alt='answer' style='vertical-align:middle;' />&nbsp;&nbsp;";					list_html = list_html+"<span style='left: 30px;margin-left:0px;margin-top:5px;text-align:left'>"+rows[hi].data_desc.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;amp;/gi,"&");					list_html = list_html+"</span>";					list_html = list_html+"</td>";					list_html = list_html+"</tr>";				<%				}				%>				  			  				<%				// faq 게시판 인경우				/*if(BOARD_TY.equals("000052")){				%>									// 답글인경우 보여주지 않는다					if(rows[hi].data_depth > 1){						//alert(rows[hi].data_desc);						list_html = list_html+"<tr style='display:none' id='answer_cont_"+rows[hi].data_origin_no+"'>";						list_html = list_html+"<td colspan='"+$("#list_th_obj").children().length+"' class=\"faq_answer\">";						list_html = list_html+"<div style='text-align:left'>"+rows[hi].data_desc.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;amp;/gi,"&");						list_html = list_html+"</div>";						list_html = list_html+"</td>";						list_html = list_html+"</tr>";					}				<%				}*/				%>		    			//desc_html = rows[hi].data_desc.replace(/&lt;/gi,"<")			//desc_html = desc_html.replace(/&gt;/gi,">");			//desc_html = desc_html.replace(/&amp;/gi,"&");						$("#list_data_obj").append(list_html);						}// FOR 종료			// 페이징을 생성한다		//console.log("res_data.record:"+res_data.records+":res_data.page:"+res_data.page+":$(#show_rows).val():"+$("#show_rows").val()+":hi:"+hi);		$(".pagingArea").html(PageindexS(res_data.records,$("#show_rows").val(),res_data.total,$("#curr_page").val(),"document.listfrm","<%=RequestURL%>","curr_page","<%=img_url%>/cmsadmin"));}</script>   <!--목록끝--><script type='text/javascript'>$(document).ready(function() {		$("#btn_search").click( function() {		if(typeof refreshGrid === 'function'){			//alert("111");		}else{			// 검색버튼을 클릭한경우는 데이터를 지운다			//alert("222");			$("#listfrm").find("#mylist_yn").val("N");			$("#curr_page").val("1");			refreshAbd();		}	});	});//<![CDATA[function Go_View(pcode,pidx,opyn,auty){		<%	// 답변형일경우	if(BOARD_TY.equals("000012")){	%>		if(opyn=="Y"){		  su_form=document.listfrm;		  su_form.method='post';		  su_form.sidx.value=pidx;		  su_form.pstate.value='R';		  su_form.action='<%=RequestURL%>';		  		  su_form.submit();		  su_form.target = "";			}else{		fnOpenPwLayer(pidx, "R");	}		<%	}else{	%>	  su_form=document.listfrm;	  su_form.method='post';	  su_form.sidx.value=pidx;	  su_form.pstate.value='R';	  su_form.action='<%=RequestURL%>';	  	  su_form.submit();	  su_form.target = "";	<%	}	%>	  }function fnPwcCallBack(data){		//alert("data.pageStatus==>"+data.pageStatus);		su_form=document.listfrm;		su_form.method='post';		su_form.pstate.value=data.pageStatus;		su_form.sidx.value=data.ikey_data;		su_form.ichk_secret_no.value=data.chk_secret_no;		su_form.action='<c:url value='/cmsmain.do'/>';		su_form.submit();		su_form.target = "";			}//목록보기function reset_list(){	  su_form=document.listfrm;	  su_form.se_field.value='';	  su_form.se_text.value='';	  refreshAbd();}// 파일다운로드function GoDownfile(file_seqno){	$.fn.cmfile.fileDownLoad("",file_seqno);}	function sechnotin(){	   var m_Sp = /[$\\@\\\#%\^\&\*\(\)\[\]\+\_\{\}\`\~\=\|\<\>]/;	   var m_val = document.getElementsByName("se_text")[0].value;	   var strLen = m_val.length;	   var m_char = m_val.charAt((strLen) - 1);	   if(m_char.search(m_Sp) != -1) {	      alert("특수문자는 사용할수없습니다.");	      document.getElementsByName("se_text")[0].value = "";	      document.getElementsByName("se_text")[0].focus();	      return;	   }}function srchCheck(){	if(event.keyCode==13){		$("#btn_search").trigger("click");	}}//#####문자체크function char_chk(str,chk){	for(i = 0; i < str.length; i++){		c = str.charAt(i);		if(c == chk){			return false;		}	}}function getadddate(datestr,flag, num){	var iyyyy = parseInt(datestr.substring(0,4),10);	var imm	  = parseInt(datestr.substring(4,6),10);	var idd	  = parseInt(datestr.substring(6,8),10);		var ret_date = new Date();	//console.log(iyyyy+"::"+imm+"::"+idd);	if(flag=="+"){		ret_date = new Date(iyyyy,imm,idd+num);		//console.log("ret_date+::"+ret_date);	}else{		ret_date = new Date(iyyyy,imm,idd-num);		//console.log("ret_date-::"+ret_date);	}	//console.log("ret_date  ::"+ret_date.getYear()+"::"+(ret_date.getMonth()+1)+"::"+ret_date.getDate());	return ret_date.getFullYear()+""+(ret_date.getMonth()>9?ret_date.getMonth():"0"+ret_date.getMonth())+""+(ret_date.getDate()>9?ret_date.getDate():"0"+ret_date.getDate());}//TODO : PageindexSfunction PageindexS(TotalCount, show_rows,		TotalPageCount, curr_page, formname, action,		formele, imgcon_root){	var pagestr = "";	var reapAmount= 10;	var indexSize = 10;			var currs_page = parseInt(curr_page,10);	var fromPage= ((currs_page) - ((currs_page - 1) % indexSize));       if(TotalPageCount==0){    	   TotalPageCount = 1;       }       var toPage = TotalPageCount;       if (toPage > (fromPage + indexSize - 1)){  	       toPage = (fromPage + indexSize - 1);  	   }              var prevPage =0;      var reapPrevPage =0;      var prevDisabled = false;       var reapPrevDisabled = false;       if(0<(currs_page-1)){         prevPage = currs_page-1;      }else{         prevDisabled = true;      }      if(0<(currs_page-reapAmount)){         reapPrevPage = currs_page-reapAmount;      }else{         reapPrevDisabled = true;      }            pagestr = pagestr +"<button class=\"first_btn\" onclick=\"goPagination('"+formname+"','"+action+"','1','"+formele+"');return false;\">"    		  + "첫페이지 보기</button>";            if(!prevDisabled){    	  pagestr = pagestr +"<button class=\"prev_btn\" onclick=\"goPagination('"+formname+"','"+action+"','"+prevPage+"','"+formele+"');return false;\">"	    		+ "이전페이지 보기</button>";      }else{    	  pagestr = pagestr +"<button class=\"prev_btn\" onclick=\"return false;\">이전페이지 보기</button>";      }            for(var k=fromPage;k<=toPage;k++){     	  var index = k;    	  var isCurrentPage = (index == currs_page);  		    	  if(isCurrentPage){    		  pagestr = pagestr +"\n<a href=\"#\" class=\"now\" style=\"margin-right:10px;\"onclick=\"goPagination('"+formname+"','"+action+"','"+index+"','"+formele+"');return false;\">"+index+"</a>";    	  }      	  if(!isCurrentPage){    		  pagestr = pagestr +"\n<a href=\"#\" onclick=\"goPagination('"+formname+"','"+action+"','"+index+"','"+formele+"');return false;\" >"+index+"</a>";    	  }    	      	  if(k!=toPage){    		  pagestr = pagestr +" ";    	  }      }            var nextPage =0;      var reapNextPage =0;      var nextDisabled = false;       var reapNextDisabled = false;       if((currs_page+1)<=TotalPageCount){         nextPage = currs_page+1;      }else{         nextDisabled = true;      }      if((currs_page+reapAmount)<=TotalPageCount){         reapNextPage = currs_page+reapAmount;      }else{         reapNextDisabled = true;      }      if(!nextDisabled){      	  pagestr = pagestr +"<button class=\"next_btn\" onclick=\"goPagination('"+formname+"','"+action+"','"+nextPage+"','"+formele+"');return false;\">"		    		+ "다음페이지 보기</button>";    	        }else{	      pagestr = pagestr +"<button class=\"next_btn\" onclick=\"return false;\">다음페이지 보기</button>";       }            pagestr = pagestr +"<button class=\"last_btn\" onclick=\"goPagination('"+formname+"','"+action+"','"+TotalPageCount+"','"+formele+"');return false;\">"    		  + "마지막페이지 보기</button>";	      		return pagestr;}<%//게시판 종류가 자유형일경우 등록버튼을 보여준다//게시판 종류는 000010:공지형 , 000011:자유형 , 000012:답변형, 000013:갤러리형 , 000014:통합형, 000051:일정형, 000052:FAQ형, 000052:동영상형if(BOARD_TY.equals("000011") || BOARD_TY.equals("000012") || BOARD_TY.equals("000417")){%>function Go_reg(){		  <%	  // 답변형게시판만 글등록 가능	 if(BOARD_TY.equals("000012")){	  %>	  $("#listfrm").attr("action","<c:url value='/cmsmain.do' />");		if("N" == "<c:out value='${nUser}'/>"){			// 회원로그인 확인			if(confirm('로그인 또는 본인인증 후 사용가능합니다.\n확인을 선택하시면 로그인화면으로 취소를 누르시면 본인인증화면으로 이동합니다.')){				//document.location.href="<c:url value='/cmsmain.do'/>?scode=S01&pcode=000253";				Go_LoginPageView("<%=pcode %>", "CF","");							// 본인인증 페이지로 이동			}else{				$("#listfrm").find("#pstate").val("CF1");				document.listfrm.submit();								}		}else{			$("#listfrm").find("#pstate").val("CF");			document.listfrm.submit();				}	 <%}else{%>	 		alert("글쓰기가 불가능합니다.");	 		return false;	 	 <%}%>	}$("#btn_reg_login").click( function() {	$("#listfrm").find("#pstate").val("CF");	//$("#dataForm").submit();	document.listfrm.action='<c:url value='/cmsmain.do'/>';	document.listfrm.submit();			});	$("#btn_reg_gologin").click( function() {	Go_LoginPageView("<%=pcode %>", "CF","");		});	$("#btn_reg_goagree").click( function() {	$("#listfrm").find("#pstate").val("CF1");	document.listfrm.action='<c:url value='/cmsmain.do'/>';	document.listfrm.submit();		});	<%}%><%// 지원사업공고 게시판만 지원신청 목록을 조회할수 있다if(BOARD_TY.equals("000223")){%>$("#btn_mylist_go").click( function() {	// 로그인이 안된경우	if("N" == "<c:out value='${nUser}'/>"){		// 회원로그인 확인		if(confirm('로그인후 조회 가능합니다.\n로그인 하시겠습니까?')){			//document.location.href="<c:url value='/cmsmain.do'/>?scode=S01&pcode=000253";			Go_LoginPageView("<%=pcode %>", "L","");		}else{			return false;		}	// 로그인이 된경우	}else{		$("#listfrm").find("#mylist_yn").val("Y");		$("#listfrm").find("#curr_page").val("1");		refreshAbd();			}		});<%}%>//비밀번호 팝업창 호출function Go_bdpwd(){	$('.password_layer').addClass('on');	$('body').addClass('no_scroll');	$('#blank_layer').show();}function rpad(str, padLength, padString){	while(str.length < padLength)		str += padString;	return str;}//]]></script>