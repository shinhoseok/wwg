<%@page pageEncoding="utf-8"%><%@include file="/WEB-INF/jsp/cm/CmCommon.jsp"%><!DOCTYPE html><html lang="ko"><head>	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />	<meta http-equiv="X-UA-Compatible" content="IE=edge">	<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width" />	<meta name="format-detection" content="telephone=no"/><!-- 전화번호 자동링크 없애기 -->	<meta name="keywords" content=""><!-- 키워드 제공 -->	<meta name="description" content=""><!-- 요약정보 -->	<meta name="robots" content="all"><!-- 검색로봇 -->	<title>중복확인</title>	<link rel="stylesheet" type="text/css" href="<%=_context_root %>/style/project_css/sub.css" />	<link rel="stylesheet" type="text/css" href="<%=_context_root %>/style/project_css/rwd.css" />	<link type="text/css" rel="stylesheet" href="<%=_context_root%>/style/S01/jquery-ui.css">	<script type="text/javascript" src="<%=_context_root%>/js/jquery-1.12.4.min.js"></script>		<script type="text/javascript" src="<%=_context_root%>/js/CmCommon.js"></script>	<script type="text/javascript" src="<%=_context_root%>/js/jquery.cookie.js"></script>	<script type="text/javascript" src="<%=_context_root%>/js/jquery-ui.js"></script>	<script type="text/javascript" src="<%=_context_root%>/js/jquery.ui.datepicker-ko.js"></script></head><body><form method="post" id="dataForm" name="dataForm" onSubmit="return false;">	<input type="hidden" name="scode" />	<input type="hidden" name="pcode" />	<input type="hidden" name="pstate" /><!--popup--><div class="popup" style="width:600px;">	<h1 class="pop_title">		아이디 중복확인		<a href="javascript:void(0);" class="pop_close" id="popupClose">팝업닫기</a>	</h1>	<div class="pop_con">		<div class="pop_box">			<dl class="pop_input">				<dt><label for="user_id">아이디</label></dt>				<dd>					<!-- <input type="text" name="user_id" id="user_id" title="" style="ime-mode:inactive;width:200px;height:30px;" /> -->					<input type="text" name="user_id" id="user_id" title="" style="ime-mode: disabled;width:200px;height:30px;" onKeyDown='srchCheck();return onlyNum(event);'/>					<button title="새창" class="btnRM" id="chkId">중복확인</button><!-- 					<p class="pop_stxt"><strong>아이디는 </strong> <span class="fc_1">10자리의 </span>사업자번호 숫자만 입력가능합니다.</p> -->				</dd>			</dl>		</div>		<p class="pop_stxt hide" id="fc_1"></p>				<!--button-->		<div id="button" style="text-align:center;display:none;">			<button class="btnBL" id="useId">사용하기</button>		</div>		<!--//button-->	</div></div><!--//popup--></form><script type="text/javascript">//<![CDATA[	$(function(){		$('#user_id').focus();				$("input[name=user_id]").val($(opener.document).find("#dataForm input[name=user_id]").val());		$("input[name=scode]").val($(opener.document).find("#dataForm input[name=scode]").val());		$("input[name=pcode]").val($(opener.document).find("#dataForm input[name=pcode]").val());		$("input[name=pstate]").val("CK");				if($(opener.document).find("#user_id").val() != ""){			fnCheckId();		}		$("#chkId").click( function() {			if($("#user_id").val() == ""){				alert("아이디를 입력해주세요.");				return false;			}else{/* 				stringRegx = /^[a-zA-Z]+[a-z0-9가-힝]{5,20}$/g;				if(!stringRegx.test( $("input[name=user_id]").val())) { 					alert("아이디는 영문자로 시작하는 6~20자 영문자 또는 숫자이어야 합니다."); 					return false;				} */								stringRegx = /[0-9]{10}$/g;				if(!stringRegx.test( $("input[name=user_id]").val())) { 					alert("아이디는  10자리의 사업자번호 숫자만 입력가능합니다."); 					return false;				}									if(!ischeckCompNmbr($("input[name=user_id]").val())){					//alert("유효한 사업자번호가 아닙니다.");					$("input[name=user_id]").focus();					return false;										}				}						fnCheckId();					});				$("#useId").click( function() {						if(confirm("사용하시겠습니까?")){				$(opener.document).find("#user_id").val($("input[name=user_id]").val());				window.close();			}else{				return;			}					});				$("#popupClose").click( function() {			window.close();		});		$("#popupClose").keypress( function(e) {			if(e.keyCode == 13) {				window.close();			}		});	});		function srchCheck(){		if(event.keyCode==13){			$("#chkId").trigger("click");		}else{			$('#fc_1').addClass('hide');			$('#fc_1').html("");			$('#button').hide();		}	}		var fnCheckId = function(){				var params = jQuery("#dataForm").serialize();				$.ajax({ type     : "post"					, url      : context_root+"/cmsajax.do"					, data     : params					, async    : false					, dataType :"json"					, timeout  : 3000					, error    : function (jqXHR, textStatus, errorThrown) {							// 통신에 에러가 있을경우 처리할 내용(생략가능)							alert("네트웍장애가 발생했습니다. 다시시도해주세요");               }               , success  : function(data) {           		            	   if(data.cnt == 0){            		   $('#fc_1').removeClass('hide');            		   $('#fc_1').html("<strong id='confirmId0'>"+$('#user_id').val()+"</strong>은(는) <span class='fc_0'>사용할 수 있는</span>아이디 입니다.<br />아이디를 사용하시겠습니까?");            		   $('#button').show();            		   $(opener.document).find("#checkFlag").val("1");            		               	   }else{            		   $('#fc_1').removeClass('hide');            		   $('#fc_1').html("<strong id='confirmId1'>"+$('#user_id').val()+"</strong>은(는) <span class='fc_0'>사용할 수 없는</span>아이디 입니다.");            		   $('#button').hide();            		   $(opener.document).find("#checkFlag").val("0");						            	   }            	               	   $("#confirmId").html($("#user_id").val());            	   bizNumSeesionAdd($("#user_id").val());               }		});	};		var bizNumSeesionAdd = function(bizNum) {		$.ajax({			  url : "<c:url value='/mypage/bizNumberSessionAdd.do' />"			, type : "post"			, dataType : "json"			, async    : false			, data : {"bizNum" : bizNum }			, success : function(r) {				//session담기 후 할일 없음			}			, error : function(xhr, status, error) {				alert("현재 회원가입 서비스가 원활하지 않습니다.\n잠시후 다시 이용해 주십시요.");			}		});	};	//]]></script></body></html>