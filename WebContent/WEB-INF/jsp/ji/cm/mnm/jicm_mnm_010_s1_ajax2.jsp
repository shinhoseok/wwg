<%@ page contentType="text/html; charset=utf-8" pageEncoding="utf-8" %><%@include file="/WEB-INF/jsp/cm/include.jsp"%><table cellspacing="0" cellpadding="0" class="defaultTable02">	<colgroup>		<col width="100%" />	</colgroup>	<tr>		<td style="vertical-align: top; padding:0; border-right:0;">			<table class="defaultTable02 sub">				<caption>메뉴 리스트-메뉴코드,메뉴명,연결종류,순번,비고</caption>				<colgroup>					<col width="10%">					<col width="*">					<col width="10%">					<col width="10%">					<col width="10%">				</colgroup>				<thead>					<th>메뉴코드</th>					<th>메뉴명</th>					<th>연결종류</th>					<th>순번</th>					<th>비고</th>				</thead>				<!-- 리스트 출력 시작 -->				<tbody>					<c:choose>						<c:when test="${fn:length(rslt.menuList) > 0}">							<c:forEach items="${rslt.menuList}" var="list" varStatus="i">								<tr height="25" bgcolor="ffffff" align="center">									<td align="center"><c:out value="${list.menuCd }"/></td>									<td align="left" onclick="fn_menuDetailView('<c:out value="${i.index}"/>');" style="cursor: pointer;"><c:out value="${list.menuNm }"/></td>									<td align="center"><c:out value="${list.linkTyNm }"/></td>									<td align="center"><c:out value="${list.orderNo }"/></td>									<td align="center">										<div class="btnlist_center">											<span class="btn_pack largeG"><a onclick="fn_deleteMenuProc('<c:out value="${list.menuSeqno }"/>', '<c:out value="${list.menuNm }"/>');" href="javascript:void(0)">삭제</a></span>										</div>									</td>								</tr>								<tr id="menuDetailView_<c:out value="${i.index}"/>" style="display: none;">									<td colspan="7" style="padding:0;">										<table cellspacing="0" cellpadding="0" border="0" width="100%">											<colgroup>												<col width="10%">												<col width="45%">												<col width="45%">											</colgroup>											<tbody>												<tr>													<th><strong>메뉴상세정보</strong></th>													<td colspan="3" bgcolor="#FFFFFF" style="padding: 0 0 0 5;" align="left">														<table cellspacing="0" cellpadding="0" border="0" width="99%">															<colgroup>																<col width="20%">																<col>															</colgroup>															<tbody>																<tr>																	<td>게시판종류(공통게시판) : </td>																	<td><c:out value="${list.boardTyNm }"/></td>																</tr>																<tr>																	<td>LINK경로(링크) :</td>																	<td><c:out value="${list.linkPath }"/></td>																</tr>																<tr>																	<td>클래스경로(프로그램) :</td>																	<td><c:out value="${list.classPath }"/></td>																</tr>																<tr>																	<td>리턴 JSP경로(프로그램) :</td>																	<td><c:out value="${list.classPathJsp }"/></td>																</tr>																<tr>																	<td>컨트롤 메소드(프로그램) :</td>																	<td><c:out value="${list.classMethod }"/></td>																</tr>															</tbody>														</table>													</td>												</tr>												<tr>													<td colspan="4" style="text-align: center;">														<div class="btnlist_right">															<span class="btn_pack large"><a onclick="javascript:fn_updateMenu('<c:out value="${list.menuSeqno }"/>');" href="javascript:void(0);">수정</a></span>															<span class="btn_pack largeG"><a onclick="javascript:fn_menuDetailClose();" href="javascript:void(0);">닫기</a></span>														</div>													</td>												</tr>											</tbody>										</table>									</td>								</tr>							</c:forEach>						</c:when>						<c:otherwise>							<tr><td colspan="5" style="text-align: center;">조회된 하위메뉴가 없습니다.</td></tr>						</c:otherwise>					</c:choose>				</tbody>			</table>			<table cellspacing="0" cellpadding="0" class="sub" style="border-top: 2px #0f71b0 solid;" id="insertTable">				<colgroup>					<col width="100%">				</colgroup>				<tbody>					<tr>						<td style="padding:0;">							<!-- 검색, 버튼 설정 시작 -->							<table class="sub">								<colgroup>									<col width="20%">									<col width="20%">									<col width="20%">									<col width="20%">									<col width="20%">								</colgroup>								<tbody>									<tr><td colspan="5" style="text-align: center;"><strong>메뉴 등록폼</strong></td></tr>									<tr>										<th class="essential">메뉴명</th>										<td colspan="2">											<input type="text" name="menuNm" id="menuNm" class="fl in" style="width: 90%;" title="메뉴명입력">										</td>										<th class="essential">연결종류</th>										<td colspan="2">											<div id="SEL_DIVS1">												<select onchange="fn_linkTyChg();" id="linkTy" style="width: 80%;">													<c:forEach items="${rslt.linkKindList}" var="list" varStatus="i">														<option value="<c:out value="${list.stdinfoDtlCd}"/>"><c:out value="${list.stdinfoDtlNm}"/></option>													</c:forEach>												</select>											</div>										</td>									</tr>									<tr>										<th class="essential"><strong>메뉴코드</strong></th>										<td colspan="2">											<input type="text" name="menuCd" id="menuCd" class="input_01" style="width: 90%;" title="수정,삭제시 선택된 메뉴코드" maxlength="10">										</td>										<th class="essential"><strong>순번</strong></th>										<td colspan="2">											<select id="orderNo" style="width: 80%;">												<c:forEach begin="0" end="${fn:length(rslt.menuList)}" var="i">													<option value="<c:out value="${i}"/>" <c:if test="${i == fn:length(rslt.menuList)}">selected</c:if>><c:out value="${i}"/></option>												</c:forEach>											</select>										</td>									</tr>									<tr id="linkTyOption_1" style="display: none;">										<th><strong>링크옵션</strong></th>										<td colspan="4" bgcolor="#FFFFFF" style="padding: 0 0 0 5;" align="left">											<table cellspacing="0" cellpadding="0" border="0" class="sub">												<colgroup>													<col width="20%">													<col>												</colgroup>												<tbody>													<tr>														<td>															<strong>LINK경로 :</strong>														</td>														<td>															<input type="text" name="linkPath" id="linkPath" class="input_01" style="width: 90%;" title="연결경로">														</td>													</tr>													<tr>														<td>															<strong>LINK타겟 :</strong>														</td>														<td>															<select name="linkTarget" id="linkTarget" title="연결타겟">																<option value="_self">현재창</option>																<option value="_new">새창</option>															</select>														</td>													</tr>													<tr>														<td>															<strong>하위메뉴종류 :</strong>														</td>														<td>															<select name="mSStyle" id="mSStyle" title="하위메뉴종류">																<option value="1">LEFT메뉴</option>																<option value="2">TAB메뉴</option>															</select>														</td>													</tr>												</tbody>											</table>										</td>									</tr>									<tr id="linkTyOption_2" style="display: none;">										<th><strong>게시판옵션</strong></th>										<td colspan="4" bgcolor="#FFFFFF" style="padding: 0 0 0 5;" align="left">											<table cellspacing="0" cellpadding="0" border="0" class="sub">												<colgroup>													<col width="20%">													<col width="*">												</colgroup>												<tbody>													<tr>														<td>															<strong>게시판종류 :</strong>														</td>														<td>															<div>																<select id="boardTy" name="boardTy">																	<c:forEach items="${rslt.boardCdList}" var="list" varStatus="i">																		<option value="<c:out value="${list.stdinfoDtlCd}"/>"><c:out value="${list.stdinfoDtlNm}"/></option>																	</c:forEach>																</select>															</div>														</td>													</tr>													<tr>														<td>															<strong>게시판 목록<br> 출력항목 :															</strong>														</td>														<td>															제목:<input type="checkbox" id="boardLiItem_0" value="B_TITLE" checked="checked"> 															작성자:<input type="checkbox" id="boardLiItem_1" value="REG_NAME" checked="checked"> 															조회수:<input type="checkbox" id="boardLiItem_2" value="READ_CNT" checked="checked"> 															작성일:<input type="checkbox" id="boardLiItem_3" value="REG_DT" checked="checked"><br> 															ETC0:<input type="checkbox" id="boardLiItem_4" value="ETC0"> 															ETC1:<input type="checkbox" id="boardLiItem_5" value="ETC1"> 															ETC2:<input type="checkbox" id="boardLiItem_6" value="ETC2"> 															ETC3:<input type="checkbox" id="boardLiItem_7" value="ETC3"> 															ETC4:<input type="checkbox" id="boardLiItem_8" value="ETC4"> 															ETC5:<input type="checkbox" id="boardLiItem_9" value="ETC5"> 															ETC6:<input type="checkbox" id="boardLiItem_10" value="ETC6"> 															ETC7:<input type="checkbox" id="boardLiItem_11" value="ETC7"> 															ETC8:<input type="checkbox" id="boardLiItem_12" value="ETC8"> 															ETC9:<input type="checkbox" id="boardLiItem_13" value="ETC9">														</td>													</tr>													<tr>														<td>															<strong>게시판 목록<br> 출력항목명 :															</strong>														</td>														<td>															제목:<input type="text" id="boardLiItemNm_0" class="w_100" value="제목" title="게시판 목록출력항목명0" maxlength="100"> 															작성자:<input type="text" id="boardLiItemNm_1" class="w_100" value="작성자" title="게시판 목록출력항목명1" maxlength="100"> 															조회수:<input type="text" id="boardLiItemNm_2" class="w_100" value="조회수" title="게시판 목록출력항목명2" maxlength="100"> 															작성일:<input type="text" id="boardLiItemNm_3" class="w_100" value="작성일" title="게시판 목록출력항목명3" maxlength="100"><br> 															ETC0:<input type="text" id="boardLiItemNm_4" class="w_100" title="게시판 목록출력항목명4" maxlength="100"> 															ETC1:<input type="text" id="boardLiItemNm_5" class="w_100" title="게시판 목록출력항목명5" maxlength="100"> 															ETC2:<input type="text" id="boardLiItemNm_6" class="w_100" title="게시판 목록출력항목명6" maxlength="100"> 															ETC3:<input type="text" id="boardLiItemNm_7" class="w_100" title="게시판 목록출력항목명7" maxlength="100"> 															ETC4:<input type="text" id="boardLiItemNm_8" class="w_100" title="게시판 목록출력항목명8" maxlength="100"><br> 															ETC5:<input type="text" id="boardLiItemNm_9" class="w_100" title="게시판 목록출력항목명9" maxlength="100"> 															ETC6:<input type="text" id="boardLiItemNm_10" class="w_100" title="게시판 목록출력항목명10" maxlength="100"> 															ETC7:<input type="text" id="boardLiItemNm_11" class="w_100" title="게시판 목록출력항목명11" maxlength="100"> 															ETC8:<input type="text" id="boardLiItemNm_12" class="w_100" title="게시판 목록출력항목명12" maxlength="100"> 															ETC9:<input type="text" id="boardLiItemNm_13" class="w_100" title="게시판 목록출력항목명13" maxlength="100">														</td>													</tr>													<tr>														<td>															<strong>게시판 임시컬럼<br>사용여부 :															</strong>														</td>														<td>															ETC0:															<select id="boardEtcItem_0" class="w_100">																<option value="N">N</option>																<option value="Y">Y</option>															</select>															ETC1:															<select id="boardEtcItem_1" class="w_100">																<option value="N">N</option>																<option value="Y">Y</option>															</select>															ETC2:															<select id="boardEtcItem_2" class="w_100">																<option value="N">N</option>																<option value="Y">Y</option>															</select>															ETC3:															<select id="boardEtcItem_3" class="w_100">																<option value="N">N</option>																<option value="Y">Y</option>															</select>															ETC4:															<select id="boardEtcItem_4" class="w_100">																<option value="N">N</option>																<option value="Y">Y</option>															</select><br>															ETC5:															<select id="boardEtcItem_5" class="w_100">																<option value="N">N</option>																<option value="Y">Y</option>															</select>															ETC6:															<select id="boardEtcItem_6" class="w_100">																<option value="N">N</option>																<option value="Y">Y</option>															</select>															ETC7:															<select id="boardEtcItem_7" class="w_100">																<option value="N">N</option>																<option value="Y">Y</option>															</select>															ETC8:															<select id="boardEtcItem_8" class="w_100">																<option value="N">N</option>																<option value="Y">Y</option>															</select>															ETC9:															<select id="boardEtcItem_9" class="w_100">																<option value="N">N</option>																<option value="Y">Y</option>															</select>														</td>													</tr>													<tr>														<td>															<strong>게시판 임시컬럼<br>사용시데이터<br>종류 :															</strong>														</td>														<td>															ETC0:															<select id="boardEtcItemTy_0" class="w_100">																<option value="V">문자</option>																<option value="N">숫자</option>																<option value="D">날짜</option>															</select>															ETC1:															<select id="boardEtcItemTy_1" class="w_100">																<option value="V">문자</option>																<option value="N">숫자</option>																<option value="D">날짜</option>															</select>															ETC2:															<select id="boardEtcItemTy_2" class="w_100">																<option value="V">문자</option>																<option value="N">숫자</option>																<option value="D">날짜</option>															</select>															ETC3:															<select id="boardEtcItemTy_3" class="w_100">																<option value="V">문자</option>																<option value="N">숫자</option>																<option value="D">날짜</option>															</select>															ETC4:															<select id="boardEtcItemTy_4" class="w_100">																<option value="V">문자</option>																<option value="N">숫자</option>																<option value="D">날짜</option>															</select><br>															ETC5:															<select id="boardEtcItemTy_5" class="w_100">																<option value="V">문자</option>																<option value="N">숫자</option>																<option value="D">날짜</option>															</select>															ETC6:															<select id="boardEtcItemTy_6" class="w_100">																<option value="V">문자</option>																<option value="N">숫자</option>																<option value="D">날짜</option>															</select>															ETC7:															<select id="boardEtcItemTy_7" class="w_100">																<option value="V">문자</option>																<option value="N">숫자</option>																<option value="D">날짜</option>															</select>															ETC8:															<select id="boardEtcItemTy_8" class="w_100">																<option value="V">문자</option>																<option value="N">숫자</option>																<option value="D">날짜</option>															</select>															ETC9:															<select id="boardEtcItemTy_9" class="w_100">																<option value="V">문자</option>																<option value="N">숫자</option>																<option value="D">날짜</option>															</select>														</td>													</tr>													<tr>														<td><strong>게시판 임시컬럼<br>출력항목명 :</strong></td>														<td>															ETC0:<input type="text" id="boardEtcItemNm_0" class="w_100" title="게시판 임시컬럼출력항목명0" maxlength="100"> 															ETC1:<input type="text" id="boardEtcItemNm_1" class="w_100" title="게시판 임시컬럼출력항목명1" maxlength="100"> 															ETC2:<input type="text" id="boardEtcItemNm_2" class="w_100" title="게시판 임시컬럼출력항목명2" maxlength="100"> 															ETC3:<input type="text" id="boardEtcItemNm_3" class="w_100" title="게시판 임시컬럼출력항목명3" maxlength="100"> 															ETC4:<input type="text" id="boardEtcItemNm_4" class="w_100" title="게시판 임시컬럼출력항목명4" maxlength="100"> <br>															ETC5:<input type="text" id="boardEtcItemNm_5" class="w_100" title="게시판 임시컬럼출력항목명5" maxlength="100"> 															ETC6:<input type="text" id="boardEtcItemNm_6" class="w_100" title="게시판 임시컬럼출력항목명6" maxlength="100"> 															ETC7:<input type="text" id="boardEtcItemNm_7" class="w_100" title="게시판 임시컬럼출력항목명7" maxlength="100"> 															ETC8:<input type="text" id="boardEtcItemNm_8" class="w_100" title="게시판 임시컬럼출력항목명8" maxlength="100"> 															ETC9:<input type="text" id="boardEtcItemNm_9" class="w_100" title="게시판 임시컬럼출력항목명9" maxlength="100">														</td>													</tr>												</tbody>											</table>										</td>									</tr>									<tr id="linkTyOption_3" style="display: none;">										<th><strong>프로그램옵션</strong></th>										<td colspan="4" bgcolor="#FFFFFF" style="padding: 0 0 0 5;" align="left">											<table cellspacing="0" cellpadding="0" border="0" class="defaultTable02 mT10">												<colgroup>													<col width="30%">													<col>												</colgroup>												<tbody>													<tr>														<td>															<strong>클래스경로 :</strong>														</td>														<td>															<input type="text" name="classPath" id="classPath" class="input_01 w_90p" title="클래스경로입력">														</td>													</tr>													<tr>														<td>															<strong>리턴될 JSP경로 :</strong>														</td>														<td>															<input type="text" name="classPathJsp" id="classPathJsp" class="input_01 w_90p" title="리턴될 JSP경로입력">														</td>													</tr>													<tr>														<td>															<strong>클래스의 컨트롤 메소드 :</strong>														</td>														<td>															<input type="text" name="classMethod" id="classMethod" class="input_01 w_90p" title="클래스의 컨트롤 메소드입력">														</td>													</tr>													<tr>														<td>															<strong>JSP파일연결종류 :</strong>														</td>														<td>															<select id="jspIncludeYn" name="jspIncludeYn" title="JSP파일연결종류">																<option value="1">INCLUDE</option>																<option value="2">결과JSP</option>															</select>														</td>													</tr>												</tbody>											</table>										</td>									</tr>									<tr>										<td colspan="5">											<div class="btnlist_center" style="text-align: center;">												<span class="btn_pack large"><a onclick="fn_insertMenuProc();" href="javascript:void(0);">메뉴등록</a></span>											</div>										</td>									</tr>								</tbody>							</table>						</td>					</tr>				</tbody>			</table>			<div id="updateTableTarget"></div>		</td>	</tr></table><script src="<c:out value='${scriptPath}'/>/validation/common.js"></script><script src="<c:out value='${scriptPath}'/>/validation/validation.js"></script><script>//하위메뉴 상세보기fn_menuDetailView = function(idx) {	$("tr[id^='menuDetailView_']").hide();	$("#menuDetailView_"+idx).show();};//하위 메뉴상세닫기fn_menuDetailClose = function() {	$("tr[id^='menuDetailView_']").hide();};//연결종류 셀렉트 박스 선택시fn_linkTyChg = function(obj) {	$("tr[id^='linkTyOption_']").hide();	var linkTy = $("#linkTy option:selected").val();		if(linkTy === "000007") { //링크		$("#linkTyOption_1").show();	} else if(linkTy === "000008") { //게시판		$("#linkTyOption_2").show();	} else if(linkTy === "000009") { //프로그램		$("#linkTyOption_3").show();	}};//메뉴 등록fn_insertMenuProc = function() {	var isValid = true;	if (!TypeChecker.required($("#menuNm").val())) {		alert("'메뉴명'은  "+ TypeChecker.requiredText);		$("#menuNm").focus();		return;	}	if (!TypeChecker.required($("#menuCd").val())) {		alert("'메뉴코드'는  "+ TypeChecker.requiredText);		$("#menuCd").focus();		return;	}		var params = {};	params.menuNm = $("#menuNm").val();	params.menuCd = $("#menuCd").val();	params.linkTy = $("#linkTy option:selected").val();	params.orderNo = $("#orderNo option:selected").val();	//메뉴코드 중복확인	$.ajax({		url: "<c:out value='${basePath}'/>/admin/selectMenuCdCheck.do",		type: 'post',		dataType : "json",		data : params,		async : false,		error: function(){			 alert("현재 조회 서비스가 원활하지 않습니다.\n관리자에게 문의주시기 바랍니다.");			 return;		},		success: function(r) {			if(!r.menuCdChk) {				alert("중복된 메뉴코드입니다. 다른값을 입력하세요.");				$("#menuCd").focus();				isValid = false;			}		}	});	if(!isValid) {		return;	}		if(params.linkTy === "000007") { //링크		params.linkPath = $("#linkPath").val();		params.linkTarget = $("#linkTarget").val();		params.mSStyle = $("#mSStyle").val();			} else if(params.linkTy === "000008") { //게시판		params.boardTy = $("#boardTy option:selected").val();		var comFlag = "::";		$("input:checkbox[id^='boardLiItem_']:checked").each(function(i) {			if(i === 0) {				params.boardLiItem = $(this).val();			} else {				params.boardLiItem = params.boardLiItem + comFlag + $(this).val();			}		});		$("input:text[id^='boardLiItemNm_']").each(function(i) {			if(i === 0) {				params.boardLiItemNm = $(this).val();			} else {				params.boardLiItemNm = params.boardLiItemNm + comFlag + $(this).val();			}		});		$("select[id^=boardEtcItem_]").each(function(i) {			if(i === 0) {				params.boardEtcItem = $(this).val();			} else {				params.boardEtcItem = params.boardEtcItem + comFlag + $(this).val();			}		});		$("select[id^='boardEtcItemTy_']").each(function(i) {			if(i === 0) {				params.boardEtcItemTy = $(this).val();			} else {				params.boardEtcItemTy = params.boardEtcItemTy + comFlag + $(this).val();			}		});		$("input:text[id^='boardEtcItemNm_']").each(function(i) {			if(i === 0) {				params.boardEtcItemNm = $(this).val();			} else {				params.boardEtcItemNm = params.boardEtcItemNm + comFlag + $(this).val();			}		});	} else if(params.linkTy === "000009") { //프로그램		params.classPath = $("#classPath").val();		params.classPathJsp = $("#classPathJsp").val();		params.classMethod = $("#classMethod").val();		params.jspIncludeYn = $("#jspIncludeYn option:selected").val();	}	//메뉴관리 트리에서 현재 선택한 메뉴(상위메뉴)	params.menuUppoCd = $("#menuMngTree").children().find(".jstree-clicked").parent().attr("menuCd");		$.ajax({		url: "<c:out value='${basePath}'/>/admin/menu/insertMenuProc.do",		type: 'POST',		dataType : "json",		data : params,		error: function(){			 alert("현재 등록 서비스가 원활하지 않습니다.\n관리자에게 문의주시기 바랍니다.");			 return;		},		success: function(r) {			menuUppoCd = params.menuUppoCd;			fn_selectMngMenuTree();		}	});};//메뉴삭제fn_deleteMenuProc = function(menuSeqno, menuNm) {	var params = {};	params.menuSeqno = menuSeqno;	if(!confirm("'"+menuNm+"' 메뉴를 삭제하시겠습니까?")) {		return;	}	$.ajax({		url: "<c:out value='${basePath}'/>/admin/menu/deleteMenuProc.do",		type: 'POST',		dataType : "json",		data : params,		error: function(){			 alert("현재 삭제 서비스가 원활하지 않습니다.\n관리자에게 문의주시기 바랍니다.");			 return;		},		success: function(r) {			//메뉴관리 트리에서 현재 선택한 메뉴(상위메뉴)			menuUppoCd = $("#menuMngTree").children().find(".jstree-clicked").parent().attr("menuCd");			fn_selectMngMenuTree();		}	});};//메뉴수정fn_updateMenu = function(menuSeqno) {	var params = {};	params.menuSeqno = menuSeqno;	$.ajax({		url: "<c:out value='${basePath}'/>/admin/menu/updateMenu.do",		type: 'POST',		dataType : "html",		data : params,		error: function(){			 alert("현재 삭제 서비스가 원활하지 않습니다.\n관리자에게 문의주시기 바랍니다.");			 return;		},		success: function(r) {			$("#insertTable").hide();			$("#updateTableTarget").html(r);		}	});};</script>